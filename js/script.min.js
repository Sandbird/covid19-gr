let gData,gRegions=[],gThresholds={carriers:0,deaths:0};const LANG=$("html").attr("lang"),SCROLLBAR_WIDTH=window.innerWidth-$(window).width(),COLORS={default:"#3DC",men:"#5987A5",women:"#FEA",second:"#FEA",athensopen:"#5987A5",thessopen:"#3BA9B0",deaths:"#FB8",serious:"#FEA",infected_distribution:"#6F6587,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),predicted_deaths:"#6F6587,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),pcrtests:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),measures:"#3DC,#8FBDE0,#689AAB,#AADCD2,#90CFB5,#88BBAA,#BADDAD,#BBCDB3,#FAF28C,#DFEA8B,#F3EF89,#F4F4B2,#CCAC8E,#FBDEDE,#F8B2BC,#F59598,#EFA796,#FEBD7D,#CEB4D6,#B5B3DA".split(","),measures2:"#3DC,#FEA,#5987A5,#3BA9B0,#86E18D,#D5F474,#FB8,#EC2,#CAF0F8".split(","),dark:"#399",selected:"#EC2"},LABELS={gr:{change:"Τελευταία μεταβολή: ",total:"Σύνολο: ",transition:{carriers:["Κρούσματα"],active:["Ενεργά κρούσματα"],infected_distribution:["Υπό διερεύνηση ή άγνωστης προέλευσης","Σχετιζόμενα με ήδη γνωστό κρούσμα","Σχετιζόμενα με ταξίδι από το εξωτερικό"],predicted_deaths:["χαμηλότερο εύρος","πρόβλεψη","ανώτερο εύρος"],serious:["Κρίσιμη κατάσταση"],deaths:["Θάνατοι"],tests:["Δείγματα που έχουν ελεγχθεί","Βρέθηκαν θετικοί"],pcrtests:[""],rt_repro:["Βασικός αναπαραγωγικός αριθμός"],rj_repro:["Αναπαραγωγικός αριθμός"]},unit:{carriers:"",active:"",infected_distribution:"",predicted_deaths:"",serious:"",deaths:"",tests:"",pcrtests:"",rt_repro:"",rj_repro:""},demography:{sum:"Σύνολο",men:"Άνδρες",women:"Γυναίκες",cases:"Κρούσμ.",deaths:"Θάνατοι",serious:"Διασωλην."},age:["65+","40-64","18-39","0-17"]},en:{change:"Daily: ",total:"Total: ",transition:{carriers:["Tested Positive"],active:["Active Cases"],infected_distribution:["Still under investigation or of unknown origin","Related to an already known case","Related to travel from abroad"],predicted_deaths:["lower range","projected","upper range"],serious:["Serious"],deaths:["Deaths"],tests:["Tested","Found Positive"],pcrtests:["National Institute of Infectious Diseases","Quarantine Stations","Public Health Institute, Public Health Center","Private Testing Companies","Universities","Medical Institutions"],rj_repro:["Reproduction Number"],rt_repro:["Effective Reproduction Number"]},unit:{carriers:"",active:"",infected_distribution:"",predicted_deaths:"",serious:"",deaths:"",tests:"",pcrtests:"",rt_repro:"",rj_repro:""},demography:{sum:"Sum",men:"Men",women:"Women",cases:"Cases",deaths:"Deaths",serious:"Serious"},age:["65+","40-64","18-39","0-17"]}},init=()=>{const t=t=>String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),a=()=>{$(".transition.nationwide").each(function(){r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})},e=()=>{$(".transition").each(function(){$(this).find(".axis-chart").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)"),$(this).find(".axis-cover").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)")})},r=(a,e,r,o=!1)=>{const s=(t,a,e,r,o)=>{let s=COLORS.default,d=n(e,r,!0);return""===a&&"carriers"===t&&(d<20200328&&(s=COLORS.measures[o]),d>=20200328&&(s=COLORS.measures[o+1]),d>=20200601&&(s=COLORS.measures[o+3]),d>=20200615&&(s=COLORS.measures[o+5]),d>=20200701&&(s=COLORS.measures[o+7]),d>=20200715&&(s=COLORS.measures[o+9]),d>=20200720&&(s=COLORS.measures[o+2]),d>=20200815&&(s=COLORS.measures[o+4])),"3"===a&&("carriers"!==t&&"deaths"!==t||d>=20200615&&(s=COLORS.athensopen)),"1"===a&&("carriers"!==t&&"deaths"!==t||d>=20200601&&(s=COLORS.athensopen)),""===a&&"infected_distribution"===t&&(s=COLORS.infected_distribution[o]),""===a&&"tests"===t&&(s=COLORS.pcrtests[o]),""===a&&"predicted_deaths"===t&&(s=COLORS.predicted_deaths[o]),""===a&&"pcrtests"===t&&(s=COLORS.pcrtests[o]),"rt_repro"===t&&(s="#242A3C"),s},n=(t,a,e)=>{let r=new Date(t[0],t[1]-1,t[2]);r.setDate(r.getDate()+a);let o="",s=r.getFullYear(),n=r.getMonth()+1,d=r.getDate();if(e){o=1e4*parseInt(s)+100*parseInt(n)+parseInt(d)}else"gr"===LANG&&(o=n+"/"+d),"en"===LANG&&(o=n+"/"+d);return o};function d(t,a){var e=Math.pow(10,a);return Math.round(t*e)/e}let i=a.find(".main-chart").empty().html("<canvas></canvas>"),l=i.find("canvas")[0],c=a.find(".switch.selected").attr("value"),p=!!a.find(".checkbox.moving-average").hasClass("on"),h=gData.transition[e];if(""!==r&&(h=gData["prefectures-data"][parseInt(r)-1][e]),void 0!==h){let g=h.from,b=h.values;((a,e)=>{let r=0,o=0;for(let t=0;t<e.length;t++)for(let a=0;a<e[0].length;a++)r+=e[t][a],t===e.length-1&&(o+=e[t][a]);if("tests"===a.attr("code")){var s=e.reduce(function(t,a){return a.forEach(function(a,e){t[e]=(t[e]||0)+a}),t},[]);let t=e[e.length-1];r=d(s[0],1),o-=t[1]}"rj_repro"===a.attr("code")&&(r=Math.round(100*e[e.length-1][0])/100,o=Math.round(100*(e[e.length-1][0]-e[e.length-2][0]))/100),"rt_repro"===a.attr("code")&&(r=Math.round(100*e[e.length-1][0])/100,o=Math.round(100*(e[e.length-1][0]-e[e.length-2][0]))/100),"predicted_deaths"===a.attr("code")&&(r=d((s=e.reduce(function(t,a){return a.forEach(function(a,e){t[e]=(t[e]||0)+a}),t},[]))[1],1),o=Math.round(100*(e[e.length-1][1]-e[e.length-2][1]))/100);var n="";"active"===a.attr("code")&&(n="~"),r=t(r),"-"!==(o=t(o)).charAt(0)&&(o="+"+o);let i=a.find(".latest");i.find(".value").text(n+r),i.find(".unit").text(LABELS[LANG].unit[a.attr("code")]),i.find(".type").text(LABELS[LANG].total),i.find(".change").text(LABELS[LANG].change+o)})(a,b);var u=!0;"rt_repro"==e&&(u=!1);let f={type:"bar",data:{labels:[],datasets:[]},options:{maintainAspectRatio:!1,animation:{duration:o?1e3:0},legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!1,callbacks:{title:function(t){let e=t[0].xLabel.trim();return"gr"===LANG&&(e="Στις "+e),"en"===LANG&&(e="As of "+e),e+" "+a.find(".switch.selected").text()},label:function(a,r){let o=[],s=0;r.datasets.forEach(function(r,n){if("reproduction_rj_infected"==e){if(root_rj=gData.transition.reproduction_rj.values,!p||n>=1){var d=void 0!==root_rj[a.index]?root_rj[a.index]:"n/a";o.push(r.label+": "+t(r.data[a.index])+" | "+LABELS[LANG].unit[e]+LABELS[LANG].transition.reproduction_rj+": "+d),s+=r.data[a.index]}}else"predicted_deaths"==e?(!p||n>=1)&&o.push(r.label+": "+t(r.data[a.index])+" "+LABELS[LANG].unit[e]):(!p||n>=1)&&(o.push(r.label+": "+t(r.data[a.index])+" "+LABELS[LANG].unit[e]),s+=r.data[a.index])}),o.reverse();let n=p?3:2;return"predicted_deaths"==!e&&r.datasets.length>=n&&o.push(LABELS[LANG].total+": "+t(s)+" "+LABELS[LANG].unit[e]),o}}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1,zeroLineColor:"rgba(255,255,0,0.7)"},ticks:{fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:t=>" "+t+" "}}],yAxes:[{location:"bottom",stacked:!0,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{beginAtZero:u,fontColor:"transparent"}}]},layout:{padding:{left:10}}}};"infected_distribution"==e&&(f.options.tooltips.caretSize=0,f.options.tooltips.titleFontSize=12,f.options.tooltips.bodyFontSize=11,f.options.tooltips.bodySpacing=0,f.options.tooltips.titleSpacing=0,f.options.tooltips.xPadding=10,f.options.tooltips.yPadding=10,f.options.tooltips.cornerRadius=2,f.options.tooltips.titleMarginBottom=2);for(let t=0;t<b[0].length;t++){if(f.data.datasets.push({label:LABELS[LANG].transition[e][t],backgroundColor:[],data:[]}),"rj_repro"===e){let t=f.data.datasets[f.data.datasets.length-1];t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2"}if("rt_repro"===e){let t=f.data.datasets[f.data.datasets.length-1];t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2"}if("predicted_deaths"===e){let t=f.data.datasets[f.data.datasets.length-1];"projected"==t.label&&(t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#FFA562",t.borderColor="#EC2")}}let L="",C=[];for(let t=0;t<b[0].length;t++)C.push(0);if(b.forEach(function(t,a){let o=s(e,r,g,a,0);f.data.labels.push(n(g,a,!1));for(let o=0;o<b[0].length;o++){C[o]+=t[o];let n=t[o];""===t[o]&&(n=0),n<0&&("total"===c||"carriers"===e||"infected_distribution"===e||"predicted_deaths"===e||"deaths"===e||"tests"===e||"pcrtests"===e)&&(n=0),"total"===c&&(n=C[o]),f.data.datasets[o].data.push(n),f.data.datasets[o].backgroundColor.push(s(e,r,g,a,o))}L=o}),i.width(Math.max(8*f.data.labels.length,i.width())),p){let t=7,a={type:"line",label:LABELS[LANG].movingAverage,fill:!1,borderColor:"#FBA",borderWidth:3,pointRadius:0,data:[]};for(let e=0;e<f.data.datasets[0].data.length;e++){let r=null;if(e>=t){r=0;for(let a=0;a<t;a++)f.data.datasets.forEach(function(t,o){r+=parseInt(t.data[e-a])});r/=t}a.data.push(r)}f.data.datasets.unshift(a)}((t,a)=>{const e=t=>{let a=t.split("/");return a[1]+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(a[0])-1]};let r=t.find("h5.updated");if(!r.hasClass("show")){let t=a.data.labels[a.data.labels.length-1],o={gr:"Στις "+e(t),en:"As of "+e(t)};r.text(o[LANG]),r.addClass("show")}})(a,f),((a,e,r)=>{let o=a.find(".axis-chart").empty().html("<canvas></canvas>").find("canvas")[0],s={type:"bar",data:e,options:{maintainAspectRatio:!1,legend:{display:!1},title:{display:!1},scales:{xAxes:[{stacked:r,drawBorder:!1,gridLines:{display:!1},ticks:{fontColor:"rgba(255,255,255,0.0)",maxRotation:0,minRotation:0}}],yAxes:[{id:"axisScale",location:"bottom",stacked:r,gridLines:{drawBorder:!1,display:!1},ticks:{beginAtZero:!0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){if(Math.floor(a)===a)return t(a.toString())}}}]}}};s.data.datasets.forEach(function(t,a){t.backgroundColor="transparent",t.borderColor="transparent",t.pointBorderColor="transparent"}),s.data.labels.forEach(function(t,a){}),window.myChart=new Chart(o.getContext("2d"),s);let n=window.myChart.scales.axisScale.max,d=window.myChart.scales.axisScale.min,i=0;switch(Math.max(n.toString().length,d.toString().length)){case 1:i=36;break;case 2:i=40;break;case 3:i=48;break;case 4:i=54;break;case 5:i=66;break;case 6:i=72;break;case 7:i=78}a.find(".axis-cover").width(i.toString()+"px")})(a,$.extend(!0,{},f.data),!0),window.myChart=new Chart(l.getContext("2d"),f)}},o=t=>{let a=t.find(".main-chart");t.find(".main-chart-wrapper").animate({scrollLeft:a.width()},0)},s=t=>{let a=0;return t.forEach(function(t,e){t.forEach(function(t,e){a+=t})}),a},n=a=>{let e=$("#region-chart").empty().html("<canvas></canvas>"),r=e.find("canvas")[0],o=$("#select-pref-type").val(),n={type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]},options:{aspectRatio:.4,animation:{duration:1e3},responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){return gData["prefectures-data"].forEach(function(a,e){a.gr!==t[0].yLabel&&a.en!==t[0].yLabel||$("#select-prefecture").val()!==a.code&&d(a.code)}),t[0].yLabel},label:function(t,a){return t.xLabel+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{position:"top",gridLines:{color:"rgba(255,255,255,0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};e.outerWidth()>=400&&(n.options.aspectRatio=1.3),""!==a&&(n.options.animation.duration=0);let i=[];gData["prefectures-data"].forEach(function(t,a){i.push({name:gData["prefectures-data"][a][LANG],value:s(t[o].values),code:(a+1).toString()})}),i.sort((t,a)=>t.value<a.value?1:t.value>a.value?-1:0),i.forEach(function(t,e){n.data.labels.push(t.name),n.data.datasets[0].data.push(t.value),a==t.code?n.data.datasets[0].backgroundColor.push(COLORS.selected):n.data.datasets[0].backgroundColor.push((t=>{let a=$("#select-pref-type").val(),e="rgba(90, 90, 90, 0.6)",r=s(gData["prefectures-data"][parseInt(t)-1][a].values);return r>=1&&(e=COLORS.dark,0===gThresholds[a]&&(e=COLORS.default)),r>=gThresholds[a]&&gThresholds[a]>=1&&(e=COLORS.default),e})(t.code))});let l=r.getContext("2d");window.myChart=new Chart(l,n)},d=t=>{$("#select-prefecture").val(t),$(".transition.prefecture").each(function(){$(this).attr("pref",t),$(this).find("h3").find("span").text(gData["prefectures-data"][parseInt(t)-1][LANG]),r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})};$.getJSON("https://raw.githubusercontent.com/Sandbird/covid19-Greece/master/greece.json",function(r){gData=r,(()=>{const t=t=>{let a=t.sort((t,a)=>t-a),e=[Math.floor(t.length/2),Math.ceil(t.length/2)];return(a[e[0]]+a[e[1]])/2};for(thType in gThresholds){let a=[];gData["prefectures-data"].forEach(function(t,e){"carriers"!==t[thType]&&"deaths"!==t[thType]||a.push(s(t[thType].values))}),gThresholds[thType]=t(a)}})(),a(),(()=>{$wrapper=$("#demography-chart-cases").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{hidden:!0,label:LABELS[LANG].demography.sum,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.men,backgroundColor:COLORS.men,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.women,backgroundColor:"#BBCDB3",borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!1,barPercentage:1,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_cases.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),(()=>{$wrapper=$("#demography-chart-deaths").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{hidden:!0,label:LABELS[LANG].demography.sum,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.men,backgroundColor:COLORS.men,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.women,backgroundColor:"#BBCDB3",borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!1,barPercentage:1,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_deaths.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),(()=>{$wrapper=$("#demography-chart-serious").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{hidden:!0,label:LABELS[LANG].demography.sum,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.men,backgroundColor:COLORS.men,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.women,backgroundColor:"#BBCDB3",borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!1,barPercentage:1,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_serious.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),(()=>{$wrapper=$("#demography-chart").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_sum.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),(()=>{$wrapper=$("#demography-chart-men").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_men.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),(()=>{$wrapper=$("#demography-chart-women").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let a={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let a=t[0].yLabel,e=0;return t.forEach(function(t,a){e+=t.xLabel}),a+": "+e+" "+{gr:"",en:"cases"}[LANG]},label:function(t,a){return a.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(a,e,r){return t(a)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(a.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(a.options.aspectRatio=2.3),gData.demography_women.forEach(function(t,e){a.data.labels.push(LABELS[LANG].age[e]);for(let e=0;e<3;e++)a.data.datasets[e].data.push(t[e])});let e=$canvas.getContext("2d");window.myChart=new Chart(e,a)})(),n(""),d("1"),$(".updated-last").text(gData.updated.last[LANG]),$(".updated-demography-cases").text(gData.updated.demography[LANG]),$(".updated-demography-deaths").text(gData.updated.demography[LANG]),$(".updated-demography-serious").text(gData.updated.demography[LANG]),$(".updated-demography-sum").text(gData.updated.demography[LANG]),$(".updated-demography-men").text(gData.updated.demography[LANG]),$(".updated-demography-women").text(gData.updated.demography[LANG]),e(),$("#cover-block").fadeOut()}),$(".transition").find(".switch").on("click",function(){let t=$(this).closest(".transition");$(this).siblings(".switch").removeClass("selected"),$(this).addClass("selected"),r(t,t.attr("code"),t.attr("pref"),!0)}),$("#select-prefecture").on("change",function(){let t=$(this).val();d(t)}),$("#select-pref-type").on("change",function(){n("")}),$(".more").on("click",function(){$(this).closest("p.notes").addClass("show")}),$(".checkboxes").find(".checkbox").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on");let t=$(this).closest(".transition");r(t,t.attr("code"),t.attr("pref"),!1)}),$('a[href^="#"]').click(function(){let t=$(this).attr("href"),a=$(t).offset().top;return $("body,html").animate({scrollTop:a},400,"swing"),!1})};$(function(){init()});