let gData,gRegions=[],gThresholds={carriers:0,deaths:0};const LANG=$("html").attr("lang"),RANDOMSTRING=Math.random().toString(36).substring(7),SCROLLBAR_WIDTH=window.innerWidth-$(window).width(),COLORS={default:"#3DC",men:"#5987A5",women:"#FEA",second:"#FEA",athensopen:"#5987A5",thessopen:"#3BA9B0",deaths:"#FB8",serious:"#FEA",infected_distribution:"#6F6587,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),infected_distribution_men:"#48C7A6,#3BA9B0,#5987A5,#6F6587".split(","),predicted_deaths:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),pcrtests:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),vaccinations:"#6F6587,#5987A5".split(","),measures:"#90CFB5,#8FBDE0,#689AAB,#AADCD2,#3DC,#88BBAA,#BADDAD,#BBCDB3,#FAF28C,#DFEA8B,#F3EF89,#3BA9B0,#F4F4B2,#CCAC8E,#FBDEDE,#F8B2BC,#F59598,#EFA796,#FEBD7D,#CEB4D6,#B5B3DA".split(","),measures2:"#3DC,#FEA,#5987A5,#3BA9B0,#86E18D,#D5F474,#FB8,#EC2,#CAF0F8".split(","),dark:"#399",selected:"#EC2"},LABELS={gr:{change:"Τελευταία μεταβολή: ",total:"Σύνολο: ",daily_cases:"Ημερ. Κρ.: ",male:"Ανδ.",female:"Γυν.",months_pref:{Jan:"Ιαν",Feb:"Φεβρ",Mar:"Μαρτ",Apr:"Απρ",May:"Μαι",Jun:"Ιουν",Jul:"Ιουλ",Aug:"Αυγ",Sep:"Σεπτ",Oct:"Οκτ",Nov:"Νοε",Dec:"Δεκ"},months:["Ιανουαρίου","Φεβρουαρίου","Μαρτίου","Απριλίου","Μαΐου","Ιουνίου","Ιουλίου","Αυγούστου","Σεπτεμβρίου","Οκτωβρίου","Νοεμβρίου","Δεκεμβρίου"],transition:{carriers:["Κρούσματα"],active:["Ενεργά κρούσματα"],infected_distribution:["Υπό διερ.η ή άγν. προέλευσης","Σχετιζ. με ήδη γνωστό κρούσμα","Σχετιζ. με ταξίδι εξωτερικού"],infected_distribution_men:["0-17","18-39","40-64","65+"],death_distribution_men:["0-17","18-39","40-64","65+"],intensive_distribution_men:["0-17","18-39","40-64","65+"],infected_distribution_total:["0-17","18-39","40-64","65+"],death_distribution_total:["0-17","18-39","40-64","65+"],intensive_distribution_total:["0-17","18-39","40-64","65+"],infected_distribution_women:["0-17","18-39","40-64","65+"],death_distribution_women:["0-17","18-39","40-64","65+"],intensive_distribution_women:["0-17","18-39","40-64","65+"],predicted_deaths:["χαμηλότερο εύρος","πρόβλεψη","ανώτερο εύρος"],predicted_true_inf:["Ημερ. ενημέρωση","Πραγμ. αριθμ."],serious:["Κρίσιμη κατάσταση"],deaths:["Θάνατοι"],tests:["Δείγματα που ελέγχθ.","Βρέθηκαν θετικοί"],agtests:["Rapid Ag"],vaccinations:["Εμβολιασμοί 2ης δόσης","Εμβολιασμοί 1ης δόσης","Συνολικοί εμβολιασμοί"],rt_repro:["Βασικός αναπαραγωγικός αριθμός"],rj_repro:["Αναπαραγωγικός αριθμός"],infection_fatality_rate:["IIFR"],positivity_rate:["Ποσοστό θετικότητας"]},unit:{carriers:"",active:"",infected_distribution:"",infected_distribution_men:"",death_distribution_men:"",intensive_distribution_men:"",infected_distribution_total:"",death_distribution_total:"",intensive_distribution_total:"",infected_distribution_women:"",death_distribution_women:"",intensive_distribution_women:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",tests:"",agtests:"",vaccinations:"",rt_repro:"",rj_repro:"",infection_fatality_rate:["%"],positivity_rate:["%"]},demography:{sum:"Σύνολο",men:"Άνδρες",women:"Γυναίκες",cases:"Κρούσμ.",deaths:"Θάνατοι",serious:"Διασωλην."},prefectures:{increasing:"αυξητική",decreasing:"καθοδική",flat:"επίπεδη",green:"Επίπεδο 1. Ετοιμότητας",orange:"Επίπεδο 3. Αυξημένης Επιτήρησης",yellow:"Επίπεδο Α. Επιτήρησης",red:"Επίπεδο Β. Αυξημένου Κινδύνου",grey:"Επίπεδο Γ. Συναγερμού",lightgrey:"Δεν υπάρχουν δεδομένα",danger:"Επικινδυνότητα",latest_cases:"Τελευταίες 14 μέρες (νέα κρούσματα)",new_unemployed:"Νέες αιτήσεις ανέργων",total_unemployed:"Σύνολο ανέργων"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]},en:{change:"Daily: ",total:"Total: ",daily_cases:"Daily Cases: ",male:"Male",female:"Fem.",months_pref:{Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],transition:{carriers:["Tested Positive"],active:["Active Cases"],infected_distribution:["Still under investigation or of unknown origin","Related to an already known case","Related to travel from abroad"],infected_distribution_men:["0-17","18-39","40-64","65+"],death_distribution_men:["0-17","18-39","40-64","65+"],intensive_distribution_men:["0-17","18-39","40-64","65+"],infected_distribution_total:["0-17","18-39","40-64","65+"],death_distribution_total:["0-17","18-39","40-64","65+"],intensive_distribution_total:["0-17","18-39","40-64","65+"],infected_distribution_women:["0-17","18-39","40-64","65+"],death_distribution_women:["0-17","18-39","40-64","65+"],intensive_distribution_women:["0-17","18-39","40-64","65+"],demography_total2:["","",""],predicted_deaths:["lower range","projected","upper range"],predicted_true_inf:["Daily report","Spec. of newly infected"],serious:["Serious"],deaths:["Deaths"],tests:["Tested","Found Positive"],agtests:["Rapid Ag"],vaccinations:["2nd dose vaccinations","1st dose vaccinations","Total vaccinations"],rj_repro:["Reproduction Number"],rt_repro:["Effective Reproduction Number"],infection_fatality_rate:["IIFR"],positivity_rate:["Positivity Rate"]},unit:{carriers:"",active:"",demography_total2:"",infected_distribution:"",infected_distribution_men:"",death_distribution_men:"",intensive_distribution_men:"",infected_distribution_total:"",death_distribution_total:"",intensive_distribution_total:"",infected_distribution_women:"",death_distribution_women:"",intensive_distribution_women:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",tests:"",agtests:"",vaccinations:"",rt_repro:"",rj_repro:"",infection_fatality_rate:["%"],positivity_rate:["%"]},demography:{sum:"Sum",men:"Men",women:"Women",cases:"Cases",deaths:"Deaths",serious:"Serious"},prefectures:{increasing:"increasing",decreasing:"decreasing",flat:"flat",green:"Level 1. Readiness",orange:"Level 3. Increased Surveillance",yellow:"Level 1. Surveillance",red:"Level 2. Increased Risk",grey:"Level 3. Alert",lightgrey:"No available data",danger:"Risk Level",latest_cases:"Last 14 days (new cases)",new_unemployed:"New unemployment claims",total_unemployed:"Total Unemployed"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]}},init=()=>{const t=t=>String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),e=()=>{$(".transition.nationwide").each(function(){r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})},a=()=>{$(".transition").each(function(){$(this).find(".axis-chart").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)"),$(this).find(".axis-cover").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)")})},r=(e,a,r,o=!1)=>{const i=(t,e,a,r,o)=>{let i=COLORS.default,s=n(a,r,!0);if(""===e&&"carriers"===t&&(s<20200328&&(i=COLORS.measures[o]),s>=20200328&&(i=COLORS.measures[o+1]),s>=20200601&&(i=COLORS.measures[o+3]),s>=20200615&&(i=COLORS.measures[o+5]),s>=20200701&&(i=COLORS.measures[o+7]),s>=20200715&&(i=COLORS.measures[o+9]),s>=20200720&&(i=COLORS.measures[o+2]),s>=20200815&&(i=COLORS.measures[o+6]),s>=20200914&&(i=COLORS.measures[o+4]),s>=20201107&&(i=COLORS.measures[o+11])),"3"===e&&("carriers"!==t&&"deaths"!==t||s>=20200615&&(i=COLORS.athensopen)),"1"===e&&("carriers"!==t&&"deaths"!==t||s>=20200601&&(i=COLORS.athensopen)),""===e&&"infected_distribution"===t&&(i=COLORS.infected_distribution[o]),""!==e||"infected_distribution_men"!==t&&"death_distribution_men"!==t&&"intensive_distribution_men"!==t&&"infected_distribution_total"!==t&&"death_distribution_total"!==t&&"intensive_distribution_total"!==t&&"infected_distribution_women"!==t&&"death_distribution_women"!==t&&"intensive_distribution_women"!==t||(i=COLORS.infected_distribution_men[o]),""===e&&"tests"===t&&(i=COLORS.pcrtests[o]),""===e&&"predicted_true_inf"===t&&(i=COLORS.pcrtests[o]),""===e&&"predicted_deaths"===t&&(i=COLORS.predicted_deaths[o]),""===e&&"agtests"===t&&(i=COLORS.pcrtests[o]),"vaccinations"===t&&(i=COLORS.vaccinations[o]),"rt_repro"===t){const t=new Date;i=s<=[t.getFullYear(),`${t.getMonth()+1}`.padStart(2,"0"),`${t.getDate()}`.padStart(2,"0")].join("")?COLORS.default:"#242A3C"}return i},n=(t,e,a)=>{let r=new Date(t[0],t[1]-1,t[2]);r.setDate(r.getDate()+e);let o="",i=r.getFullYear(),n=r.getMonth()+1,s=r.getDate();if(a){o=1e4*parseInt(i)+100*parseInt(n)+parseInt(s)}else"gr"===LANG&&(o=n+"/"+s),"en"===LANG&&(o=n+"/"+s);return o};function s(t,e){var a=Math.pow(10,e);return Math.round(t*a)/a}let d=e.find(".main-chart").empty().html("<canvas></canvas>"),l=d.find("canvas")[0],c=e.find(".switch.selected").attr("value"),p=!!e.find(".checkbox.moving-average").hasClass("on"),u=gData.transition[a];if(""!==r&&(u=gData["prefectures-data"][parseInt(r)-1][a]),void 0!==u){let h=u.from,f=u.values;((e,a)=>{let r=0,o=0;for(let t=0;t<a.length;t++)for(let e=0;e<a[0].length;e++)r+=a[t][e],t===a.length-1&&(o+=a[t][e]);if("tests"===e.attr("code")){var i=a.reduce(function(t,e){return e.forEach(function(e,a){t[a]=(t[a]||0)+e}),t},[]);let t=a[a.length-1];r=s(i[0],1),o-=t[1]}if("predicted_true_inf"===e.attr("code")||"predicted_deaths"===e.attr("code")){i=a.reduce(function(t,e){return e.forEach(function(e,a){t[a]=(t[a]||0)+e}),t},[]);let t=a[a.length-1];r=s(i[1],1),o-=t[1]}"rj_repro"!==e.attr("code")&&"rt_repro"!==e.attr("code")&&"infection_fatality_rate"!==e.attr("code")&&"positivity_rate"!==e.attr("code")||(r=Math.round(1e3*a[a.length-1][0])/1e3,o=Math.round(1e3*(a[a.length-1][0]-a[a.length-2][0]))/1e3);var n="";"active"===e.attr("code")&&(n="~"),r=t(r),"-"!==(o=t(o)).charAt(0)&&(o="+"+o);let d=e.find(".latest");d.find(".value").text(n+r),d.find(".unit").text(LABELS[LANG].unit[e.attr("code")]),d.find(".type").text(LABELS[LANG].total),d.find(".change").text(LABELS[LANG].change+o)})(e,f);var g=!0;"rt_repro"!=a&&"infection_fatality_rate"!=a&&"positivity_rate"!=a||(g=!1);let b={type:"bar",data:{labels:[],datasets:[]},options:{maintainAspectRatio:!1,animation:{duration:o?1e3:0},legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!1,callbacks:{title:function(t){let a=t[0].xLabel.trim();return"gr"===LANG&&(a="Στις "+a),"en"===LANG&&(a="As of "+a),a+" "+e.find(".switch.selected").text()},label:function(e,r){let o=[],i=0,n=0;r.datasets.forEach(function(r,s){if("reproduction_rj_infected"==a){if(root_rj=gData.transition.reproduction_rj.values,!p||s>=1){var d=void 0!==root_rj[e.index]?root_rj[e.index]:"n/a";o.push(r.label+": "+t(r.data[e.index])+" | "+LABELS[LANG].unit[a]+LABELS[LANG].transition.reproduction_rj+": "+d),i+=r.data[e.index]}}else if("vaccinations"==a)n+=parseInt(r.data[e.index]),(!p||s>=1)&&(o.push(r.label+": "+t(r.data[e.index])+" "+LABELS[LANG].unit[a]),i+=r.data[e.index]);else if("predicted_deaths"==a){root_pd=gData.transition.predicted_deaths.values;var l=root_pd[e.index];if(0==l[0]&&0==l[2])"πρόβλεψη"!=r.label&&"projected"!=r.label||o.push(LABELS[LANG].transition.deaths+": "+t(r.data[e.index]));else{if("πρόβλεψη"==r.label||"projected"==r.label)var c=parseFloat(t(r.data[e.index])).toFixed(2);else c=t(r.data[e.index]);o.push(r.label+": "+c+" "+LABELS[LANG].unit[a])}}else"infection_fatality_rate"==a||"positivity_rate"==a?(o.push(r.label+": "+t(r.data[e.index])+LABELS[LANG].unit[a]),i+=r.data[e.index]):(!p||s>=1)&&(o.push(r.label+": "+t(r.data[e.index])+" "+LABELS[LANG].unit[a]),i+=r.data[e.index])}),o.reverse();let s=p?3:2;return"predicted_deaths"==!a&&r.datasets.length>=s&&o.push(LABELS[LANG].total+": "+t(i)+" "+LABELS[LANG].unit[a]),"vaccinations"==a&&o.push(LABELS[LANG].transition.vaccinations[2]+": "+t(i)+" "+LABELS[LANG].unit[a]),o}}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1,zeroLineColor:"rgba(255,255,0,0.7)"},ticks:{fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:t=>" "+t+" "}}],yAxes:[{location:"bottom",stacked:!0,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{beginAtZero:g,fontColor:"transparent"}}]},layout:{padding:{left:10}}}};"predicted_true_inf"==a&&(b.options.scales.xAxes=[{stacked:!0,gridLines:{drawOnChartArea:!1,tickMarkLength:10,color:"rgba(255, 255, 255, 0.3)"},ticks:{autoSkip:!0,fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:t=>" "+t+" "}}],b.options.scales.yAxes=[{stacked:!1,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{fontColor:"transparent",userCallback:function(t,e,a){return t=(t=(t=t.toString()).split(/(?=(?:...)*$)/)).join(",")}}}]),"infected_distribution"!=a&&"infected_distribution_men"!=a&&"death_distribution_men"!=a&&"intensive_distribution_men"!=a&&"infected_distribution_total"!==a&&"death_distribution_total"!==a&&"intensive_distribution_total"!==a&&"infected_distribution_women"!==a&&"death_distribution_women"!==a&&"intensive_distribution_women"!==a||(b.options.tooltips.caretSize=0,b.options.tooltips.titleFontSize=12,b.options.tooltips.bodyFontSize=11,b.options.tooltips.bodySpacing=0,b.options.tooltips.titleSpacing=0,b.options.tooltips.xPadding=10,b.options.tooltips.yPadding=10,b.options.tooltips.cornerRadius=2,b.options.tooltips.titleMarginBottom=2);for(let t=0;t<f[0].length;t++){if(b.data.datasets.push({label:LABELS[LANG].transition[a][t],backgroundColor:[],data:[]}),"rj_repro"===a||"rt_repro"===a||"infection_fatality_rate"===a||"positivity_rate"===a){let t=b.data.datasets[b.data.datasets.length-1];t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2"}if("predicted_deaths"===a){let t=b.data.datasets[b.data.datasets.length-1];"πρόβλεψη"!=t.label&&"projected"!=t.label||(t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2")}}let m="",v=[];for(let t=0;t<f[0].length;t++)v.push(0);if(f.forEach(function(t,e){let o=i(a,r,h,e,0);b.data.labels.push(n(h,e,!1));for(let o=0;o<f[0].length;o++){v[o]+=t[o];let n=t[o];""===t[o]&&(n=0),n<0&&("total"===c||"carriers"===a||"infected_distribution"===a||"infected_distribution_men"===a||"death_distribution_men"===a||"predicted_deaths"===a||"deaths"===a||"tests"===a||"agtests"===a||"vaccinations"===a)&&(n=0),"total"===c&&(n=v[o]),b.data.datasets[o].data.push(n),b.data.datasets[o].backgroundColor.push(i(a,r,h,e,o))}m=o}),d.width(Math.max(8*b.data.labels.length,d.width())),p){let t=7,e={type:"line",label:LABELS[LANG].movingAverage,fill:!1,borderColor:"#FBA",borderWidth:3,pointRadius:0,data:[]};for(let a=0;a<b.data.datasets[0].data.length;a++){let r=null;if(a>=t){r=0;for(let e=0;e<t;e++)b.data.datasets.forEach(function(t,o){r+=parseInt(t.data[a-e])});r/=t}e.data.push(r)}b.data.datasets.unshift(e)}((t,e)=>{const a=t=>{let e=t.split("/");return e[1]+" "+LABELS[LANG].months[parseInt(e[0])-1]};let r=t.find("h5.updated");if(!r.hasClass("show")){let t=e.data.labels[e.data.labels.length-1],o={gr:"Στις "+a(t),en:"As of "+a(t)};r.text(o[LANG]),r.addClass("show")}})(e,b),((e,a,r)=>{let o=e.find(".axis-chart").empty().html("<canvas></canvas>").find("canvas")[0],i={type:"bar",data:a,options:{maintainAspectRatio:!1,legend:{display:!1},title:{display:!1},scales:{xAxes:[{stacked:r,drawBorder:!1,gridLines:{display:!1},ticks:{fontColor:"rgba(255,255,255,0.0)",maxRotation:0,minRotation:0}}],yAxes:[{id:"axisScale",location:"bottom",stacked:r,gridLines:{drawBorder:!1,display:!1},ticks:{beginAtZero:!0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,r){if(Math.floor(e)===e)return t(e.toString())}}}]}}};i.data.datasets.forEach(function(t,e){t.backgroundColor="transparent",t.borderColor="transparent",t.pointBorderColor="transparent"}),i.data.labels.forEach(function(t,e){}),window.myChart=new Chart(o.getContext("2d"),i);let n=window.myChart.scales.axisScale.max,s=window.myChart.scales.axisScale.min,d=0;switch(Math.max(n.toString().length,s.toString().length)){case 1:d=36;break;case 2:d=40;break;case 3:d=48;break;case 4:d=54;break;case 5:d=66;break;case 6:d=72;break;case 7:d=78}e.find(".axis-cover").width(d.toString()+"px")})(e,$.extend(!0,{},b.data),!0),window.myChart=new Chart(l.getContext("2d"),b)}},o=t=>{let e=t.find(".main-chart");t.find(".main-chart-wrapper").animate({scrollLeft:e.width()},0)},i=(t,e)=>{let a=0;return t.forEach(function(t,e){t.forEach(function(t,e){a+=t})}),a},n=function(t){var e=t.split("-");return LABELS[LANG].months_pref[e[0]]+"-"+e[1]||t},s=(t,e)=>{let a=new Date(t[0],t[1]-1,t[2]);var r=a.getDate();a.setMonth(a.getMonth()+e),a.getDate()!=r&&a.setDate(0);let o="",i=a.getFullYear().toString().substr(-2),n=a.getMonth();return"gr"===LANG&&(o=LABELS[LANG].months[n].substr(0,3)+"-"+i),"en"===LANG&&(o=LABELS[LANG].months[n].substr(0,3)+"-"+i),o},d=t=>{let e=$("#unemployment-chart").empty().html("<canvas></canvas>"),a=e.find("canvas")[0],r=$("#select-unemp-type").val();void 0!==r||(r=1);var o={type:"bar",data:{labels:[],datasets:[{type:"line",label:LABELS[LANG].prefectures.new_unemployed,data:[],borderColor:"#0CBF12",backgroundColor:"rgba(0, 0, 0, 0)",yAxisID:"newunemployed"},{label:LABELS[LANG].prefectures.total_unemployed,data:[],borderColor:"rgba(0, 0, 0, 0)",backgroundColor:"#C5042D",yAxisID:"totalunemployed"}]},options:{maintainAspectRatio:!1,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},animation:{duration:1e3},scales:{xAxes:[{gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)"}}],yAxes:[{id:"newunemployed",ticks:{fontColor:"rgba(255,255,255,0.7)",beginAtZero:!0},gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},scaleLabel:{display:!0,labelString:LABELS[LANG].prefectures.new_unemployed}},{id:"totalunemployed",position:"right",ticks:{fontColor:"rgba(255,255,255,0.7)",beginAtZero:!0},scaleLabel:{display:!0,labelString:LABELS[LANG].prefectures.total_unemployed}}]}}};let i=[];for(var n=gData["regions-unemployment"][0].new_claims.from,d=gData["regions-unemployment"][0].new_claims.values.length,l=0;l<d;l++)o.data.labels.push(s(n,l));gData["regions-unemployment"].forEach(function(t,e){t.code==r&&i.push({name:gData["regions-unemployment"][e][LANG],new_claims:t.new_claims,total_unemployed:t.total_unemployed,code:e.toString()})}),i.forEach(function(t,e){o.data.datasets[0].data=t.new_claims.values,o.data.datasets[1].data=t.total_unemployed.values}),e.outerWidth()>=400&&(o.options.aspectRatio=1.1),e.outerWidth()>=600&&(o.options.aspectRatio=1.3);let c=a.getContext("2d");window.myChart=new Chart(c,o)},l=()=>{$("#greece-map").empty();Highcharts.mapChart("greece-map",{navigation:{buttonOptions:{enabled:!1}},legend:{enabled:!1},credits:{enabled:!1},chart:{map:"countries/gr/gr-all"},title:{text:""},subtitle:{text:""},mapNavigation:{enabled:!1},tooltip:{formatter:function(){var t,e=this.point.value,a="";return gData["prefectures-data"].forEach(function(r,o){r.gr!==e[1]&&r.en!==e[1]||(t=r.value,a+='<span style="color:'+COLORS.selected+'">'+r[LANG]+"</span><br>"+LABELS[LANG].transition.carriers+" : "+t)}),a}},series:[{stickyTracking:!0,data:[["gr-at",[1,"Attica"]],["gr-gc",[2,"Central Greece"]],["gr-mc",[3,"Central Macedonia"]],["gr-cr",[4,"Crete"]],["gr-mt",[5,"Eastern Macedonia and Thrace"]],["gr-ep",[6,"Epirus"]],["gr-ii",[7,"Ionian Islands"]],["gr-ma",[8,"Mount Athos"]],["gr-an",[9,"North Aegean"]],["gr-pp",[10,"Peloponnese"]],["gr-as",[11,"South Aegean"]],["gr-ts",[12,"Thessaly"]],["gr-gw",[13,"Western Greece"]],["gr-mw",[14,"Western Macedonia"]]].map(t=>{var e,a=["#33ddcc","#48C7A6","#3BA9B0","#5987A5","#6F6587"];return gData["prefectures-data"].forEach(function(r,o){r.gr!==t[1][1]&&r.en!==t[1][1]||((e=r.value100k)>0&&e<=200?t.push(a[0]):e>200&&e<=400?t.push(a[1]):e>400&&e<=600?t.push(a[2]):e>600&&e<=800?t.push(a[3]):e>800&&t.push(a[4]))}),t}),keys:["hc-key","value","color"],name:"",borderColor:"black",borderWidth:.1,states:{hover:{color:"#eecc22"}},dataLabels:{enabled:!1,format:"{point.name}"},point:{events:{mouseOver:function(t){u(t.target.value[0]),g(t.target.value[0])}}}}]})},c=()=>{gData["prefectures-details"].forEach(function(t,e){var a,r,o,i=gData["prefectures-details"][e][LANG],n=t.twoweektrendlatest,s=t.newcasesperweekpop,d=Math.floor(s),l=t.last14days_rolling.values,c=t.color,p=LABELS[LANG].prefectures[t.color],u="",g=Array.isArray(t.rj_value)?t.rj_value[1].slice(-1).pop():"",h=t.newcases>0?"+"+t.newcases:"",f=t.newvaccinations>0?"+"+t.newvaccinations:"";if(s<=12)var b="#fff!important;";else b="inherit;";Array.isArray(t.rj_value)&&(t.rj_value[0][1]<t.rj_value[1][1]?(o="increasing",u=LABELS[LANG].prefectures.increasing):t.rj_value[0][1]>t.rj_value[1][1]?(o="decreasing",u=LABELS[LANG].prefectures.decreasing):(o="flat",u=LABELS[LANG].prefectures.flat)),n>=0&&n<=5?(a="flat",r=LABELS[LANG].prefectures.flat):n>5?(a="increasing",r=LABELS[LANG].prefectures.increasing):(a="decreasing",r=LABELS[LANG].prefectures.decreasing),$("#tbodyid").append(`<tr>\n\t\t\t\t<td id="box_${e}" class="${c} personPopupTrigger" style="text-align:left!important" rel="${i},${p},${c}">${i}</td>\n\t\t\t\t<td class="${a} smallertext"><h4 class="m-0 font-weight-bold" style="color: inherit;">${t.twoweektrendlatest}%</h4><span class="${a}">${r}</span></td>\n\t\t\t\t<td><span id="sparkline${e}"></span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${t.totalcases}</h4><div style="font-size: 10px; margin-top: -2px; color: #ffc108">${h}</div></td>\n\t\t\t\t<td><div class="progress"><div role="progressbar" aria-valuenow="${s}" aria-valuemin="0" aria-valuemax="200" class="progress-bar ${c}" style="width: ${d}%;color: ${b}">${s}</div></div></td>\n\t\t\t\t<td class="${o} smallertext"><h4 class="m-0 font-weight-bold" style="color: inherit;">${g}</h4><span>${u}</span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: #3DC;">${t.total_vaccinations}</h4><div style="font-size: 10px; margin-top: -2px; color: #8bc34a">${f}</div></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${t.population}</h4></td>\n\t\t\t</tr>`),$("#sparkline"+e).sparkline(l,{type:"line",width:100,height:50,lineColor:"#0083CD",fillColor:"rgba(0,131,205,0.2)",minSpotColor:!0,maxSpotColor:!0})}),$("#search-nomous").on("keyup",function(){var t=$(this).val().toLowerCase();$("#tbodyid tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)})}),$("#prefectures").tablesorter({theme:"blackice",widgets:["saveSort"],widgetOptions:{saveSort:!0},sortList:[[4,1]]}),$("#pref-updated").text(gData.updated.lastprefecture[LANG])},p=()=>{var t=null,e=function(){t&&clearTimeout(t),t=setTimeout(function(){a={left:"0px",top:"0px"},r.css("display","none")},500)},a={left:"0px",top:"0px"},r=$(`<div class="root" id="PopupContainer">\n\t\t\t   <div class="StateTooltip" style="width: 350px;">\n\t\t\t      <div style="margin-bottom: 9px; border-bottom: 1px solid rgb(238, 238, 238);">\n\t\t\t         <div class="Row">\n\t\t\t            <div class="Col" style="white-space: nowrap;">\n\t\t\t               <div style="font-weight: bold; padding: 0px 0px 5px;">\n\t\t\t                  <div class="ColorDot ColorDotFlashing colorclass" style=""></div>\n\t\t\t                  <span id="prefect_name"></span>\n\t\t\t               </div>\n\t\t\t            </div>\n\t            <div class="Col">\n\t               <div id="closetab" style="font-size: 10px; color: #aaa; text-align: right; line-height: 20px;">X</div>\n\t            </div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t      <div class="Row">\n\t\t\t        <div class="LabeledDataFrame">\n\t\t\t           <h3>${LABELS[LANG].prefectures.danger}</h3>\n\t\t\t           <div class="content">\n\t\t\t              <div class="color"><span id="dangerlevel"></span></div>\n\t\t\t           </div>\n\t\t\t        </div>\n\t\t\t      </div>\n\t\t\t      <div class="Row">\n\t\t\t         <div class="LabeledDataFrame" style="width:100%">\n\t\t\t          <h3>${LABELS[LANG].prefectures.latest_cases}</h3>\n\t\t\t            <div class="content">\n\t\t\t               <canvas style="width: 100% !important;height: auto !important;" id="myChart">\n\t\t\t            </div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t   </div>\n\t\t\t</div>`);const o=(t,e,a)=>{let r=new Date(t[0],t[1]-1,t[2]);r.setDate(r.getDate()+e);let o="",i=r.getFullYear(),n=r.getMonth()+1,s=r.getDate();if(a){o=1e4*parseInt(i)+100*parseInt(n)+parseInt(s)}else"gr"===LANG&&(o=n+"/"+s),"en"===LANG&&(o=n+"/"+s);return o};$(".personPopupTrigger").on("mouseover",function(){$(this).data("hoverIntentAttached")||($(this).data("hoverIntentAttached",!0),$(this).hoverIntent(function(){t&&clearTimeout(t);var e=$(this).attr("rel").split(","),i=e[0],n=e[1],s=e[2];if(""!=n){var d=$(this).offset(),l=$(this).width(),c={left:d.left+l+"px",top:d.top-5+"px"};if(a.left!=c.left||a.top!=c.top){r.css({left:c.left,top:c.top}),a=c,$("#prefect_name").html(i),$("#dangerlevel").html(n);var p={green:"#12ad2c",yellow:"#ffc300",orange:"#E5712A",red:"#c82d2d",lightgrey:"#ccc",grey:"#605f69"};$(".color").removeAttr("style").css({color:p[s],"font-weight":"bold"}),$(".colorclass").removeAttr("style").css({"background-color":p[s]});var u,g,h=$("#myChart"),f=new Chart(h,{type:"bar",data:{labels:[],datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1}]},options:{responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{mode:"index",intersect:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]},animation:{duration:500,easing:"easeOutQuart",onComplete:function(){var t=this.chart.ctx;t.font=Chart.helpers.fontString("10","bold",Chart.defaults.global.defaultFontFamily),t.textAlign="center",t.textBaseline="bottom",this.data.datasets.forEach(function(e){for(var a=0;a<e.data.length;a++){var r=e._meta[Object.keys(e._meta)[0]].data[a]._model,o=e._meta[Object.keys(e._meta)[0]].data[a]._yScale.maxHeight;t.fillStyle="#444";var i=r.y-5;(o-r.y)/o>=.85&&(i=r.y+20),t.fillText(e.data[a],r.x,i)}})}}}});r.css("display","block"),u=f,g=i,gData["prefectures-details"].forEach(function(t,e){t[LANG]==g&&(u.legend.display=!1,u.data.datasets[0].data=gData["prefectures-details"][e].carriers.values,gData["prefectures-details"][e].carriers.values.forEach(function(t,a){u.data.labels.push(o(gData["prefectures-details"][e].carriers.from,a,!1))}),u.update())})}}},e),$(this).trigger("mouseover"))}),$("body").append(r),$("#PopupContainer").mouseover(function(){t&&clearTimeout(t)}),$("#PopupContainer").mouseout(e),$("#closetab").mouseover(closetab)},u=e=>{let a=$("#region-chart").empty().html("<canvas></canvas>"),r=a.find("canvas")[0],o=$("#select-pref-type").val(),n={type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]},options:{aspectRatio:.4,animation:{duration:1e3},responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){return gData["prefectures-data"].forEach(function(e,a){e.gr!==t[0].yLabel&&e.en!==t[0].yLabel||$("#select-prefecture").val()!==e.code&&g(e.code)}),t[0].yLabel},label:function(t,e){return t.xLabel+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{position:"top",gridLines:{color:"rgba(255,255,255,0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,r){return t(e)}}}],yAxes:[{gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};a.outerWidth()>=400&&(n.options.aspectRatio=1.3),""!==e&&(n.options.animation.duration=0);let s=[];gData["prefectures-data"].forEach(function(t,e){s.push({name:gData["prefectures-data"][e][LANG],value:i(t[o].values,t.code),code:(e+1).toString()})}),s.sort((t,e)=>t.value<e.value?1:t.value>e.value?-1:0),s.forEach(function(t,a){n.data.labels.push(t.name),n.data.datasets[0].data.push(t.value),e==t.code?n.data.datasets[0].backgroundColor.push(COLORS.selected):n.data.datasets[0].backgroundColor.push((t=>{let e=$("#select-pref-type").val(),a="rgba(90, 90, 90, 0.6)",r=i(gData["prefectures-data"][parseInt(t.code)-1][e].values,t.code);return r>=1&&(a=COLORS.dark,0===gThresholds[e]&&(a=COLORS.default)),r>=gThresholds[e]&&gThresholds[e]>=1&&(a=COLORS.default),a})(t))});let d=r.getContext("2d");window.myChart=new Chart(d,n)},g=t=>{$("#select-prefecture").val(t),$(".transition.prefecture").each(function(){$(this).attr("pref",t),$(this).find("h3").find("span").text(gData["prefectures-data"][parseInt(t)-1][LANG]),r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})},h=()=>{let t,e,a,r,o=[];function i(t,a){$.each(o,function(t,r){var o=e.getRegion(r.prefname);if(void 0!==o&&void 0!==r.prefval[a.value]){o.setFill("#"+r.prefval[a.value][1]),o.setTooltip(r.prefname+"<br><sup>*</sup>"+LABELS[LANG].total+r.prefval[a.value][2]+"<br>"+LABELS[LANG].daily_cases+r.prefval[a.value][3]);var i=new Date(r.prefval[a.value][0]).toDateString().split(" ").slice(1).join(" ").split(" ");i[0]=LABELS[LANG].months_pref[i[0]],$("#date_txt").text(i.join(" "))}})}gData.transition.mapepi.forEach(function(e,i){var n=[];n.prefname=gData.transition.mapepi[i].en,n.prefval=gData.transition.mapepi[i].percentage.values,(a=new Date(gData.transition.mapepi[i].percentage.from).toDateString().split(" ").slice(1))[0]=LABELS[LANG].months_pref[a[0]],a=a.join(" "),(r=new Date(gData.transition.mapepi[i].percentage.to).toDateString().split(" ").slice(1))[0]=LABELS[LANG].months_pref[r[0]],r=r.join(" "),n.start=gData.transition.mapepi[i].percentage.from,o.push(n),t=n.prefval.length});$("#mapsvg").mapSvg({width:"100%",height:"100%",colors:{baseDefault:"#000000",background:"#242A3C",selected:0,hover:20,directory:"#fafafa",status:{}},viewBox:[0,-1.8823751724135036,6843.8384,6761.240350344827],tooltips:{mode:"id",on:!1,priority:"local",position:"bottom-right"},source:"lib/mapsvg/maps/not-calibrated\\greece.svg",title:"Not-calibrated\\greece",responsive:!0,afterLoad:function(){e=this,$(".map").show(),$("#slider").slider({range:!1,min:0,max:t-1,step:1,slide:function(t,e){i(0,e)},change:function(t,e){i(0,e)},create:function(e,a){$(this).slider("value",t-1)}});var a,o=!1,n=$("#pause");n.on("click",function(){0==(o=!o)?(clearInterval(a),n.html("Play")):a=setInterval(function(){var t=$("#slider").slider("value"),e=parseInt(t)+1;$("#slider").slider("value",e),$("#sliderval").val(e),n.html("Pause")},200)}),$("#date_txt").text(r)}})};$.getJSON("https://raw.githubusercontent.com/Sandbird/covid19-Greece/master/greece.json?version="+RANDOMSTRING,function(r){gData=r,(()=>{const t=t=>{let e=t.sort((t,e)=>t-e),a=[Math.floor(t.length/2),Math.ceil(t.length/2)];return(e[a[0]]+e[a[1]])/2};for(thType in gThresholds){let e=[];gData["prefectures-data"].forEach(function(t,a){"carriers"!==t[thType]&&"deaths"!==t[thType]&&"vaccinations"!==t[thType]||e.push(i(t[thType].values),t.code)}),gThresholds[thType]=t(e)}})(),e(),(()=>{$wrapper=$("#demography-chart-group-cases").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:"Κρούσματα"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]};var e={};gData.demography_group_cases.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_cases.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_cases.cases[a]})}),$("#demography-chart-group-cases").highcharts(t)})(),(()=>{$wrapper=$("#demography-chart-group-deaths").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:"Θάνατοι"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]};var e={};gData.demography_group_deaths.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_deaths.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_deaths.deaths[a]})}),$("#demography-chart-group-deaths").highcharts(t)})(),(()=>{$wrapper=$("#demography-chart-group-intensive").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:"Νοσηλείες"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]};var e={};gData.demography_group_intensive.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_intensive.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_intensive.intensive[a]})}),$("#demography-chart-group-intensive").highcharts(t)})(),d(),(()=>{$wrapper=$("#demography-chart").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){return e.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,r){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_sum.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),(()=>{$wrapper=$("#demography-chart-men").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){return e.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,r){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_men.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),(()=>{$wrapper=$("#demography-chart-women").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){return e.datasets[t.datasetIndex].label+": "+t.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,r){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_women.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),l(),u(""),g("1"),c(),$(".updated-last").text(gData.updated.last[LANG]),$(".updated-demography-cases").text(gData.updated.demography[LANG]),$(".updated-demography-deaths").text(gData.updated.demography[LANG]),$(".updated-demography-serious").text(gData.updated.demography[LANG]),$(".updated-demography-sum").text(gData.updated.demography[LANG]),$(".updated-demography-men").text(gData.updated.demography[LANG]),$(".updated-demography-women").text(gData.updated.demography[LANG]),$(".updated-unemployment").text(gData.updated.demography[LANG]),a();var o=$("#predicted_scroller").scrollLeft(),s=(new Date).getWeek();$("#predicted_scroller").animate({scrollLeft:o-4*s},800),$("#cover-block").fadeOut(),p(),h()}),$(".transition").find(".switch").on("click",function(){let t=$(this).closest(".transition");$(this).siblings(".switch").removeClass("selected"),$(this).addClass("selected"),r(t,t.attr("code"),t.attr("pref"),!0)}),$("#select-prefecture").on("change",function(){let t=$(this).val();g(t)}),$("#select-pref-type").on("change",function(){u("")}),$("#select-unemp-type").on("change",function(){d()}),$(".more").on("click",function(){$(this).closest("p.notes").addClass("show")}),$(".checkboxes").find(".checkbox").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on");let t=$(this).closest(".transition");r(t,t.attr("code"),t.attr("pref"),!1)}),$('a[href^="#"]').click(function(){let t=$(this).attr("href"),e=$(t).offset().top;return $("body,html").animate({scrollTop:e},400,"swing"),!1})};function isInt(t){return/^-?[0-9]+$/.test(t)}Date.prototype.getWeek=function(){var t=new Date(this.getFullYear(),0,1),e=(new Date(this.getFullYear(),this.getMonth(),this.getDate())-t+1)/864e5;return Math.ceil(e/7)},$(function(){init()});