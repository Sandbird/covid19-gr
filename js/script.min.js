let gData,gRegions=[],gThresholds={carriers:0,deaths:0};const LANG=$("html").attr("lang"),SCROLLBAR_WIDTH=window.innerWidth-$(window).width(),COLORS={default:"#3DC",men:"#5987A5",women:"#FEA",second:"#FEA",athensopen:"#5987A5",thessopen:"#3BA9B0",deaths:"#FB8",serious:"#FEA",infected_distribution:"#6F6587,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),predicted_deaths:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),pcrtests:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),measures:"#90CFB5,#8FBDE0,#689AAB,#AADCD2,#3DC,#88BBAA,#BADDAD,#BBCDB3,#FAF28C,#DFEA8B,#F3EF89,#F4F4B2,#CCAC8E,#FBDEDE,#F8B2BC,#F59598,#EFA796,#FEBD7D,#CEB4D6,#B5B3DA".split(","),measures2:"#3DC,#FEA,#5987A5,#3BA9B0,#86E18D,#D5F474,#FB8,#EC2,#CAF0F8".split(","),dark:"#399",selected:"#EC2"},LABELS={gr:{change:"Τελευταία μεταβολή: ",total:"Σύνολο: ",male:"Ανδ.",female:"Γυν.",months:{Jan:"Ιαν",Feb:"Φεβρ",Mar:"Μαρτ",Apr:"Απρ",May:"Μαι",Jun:"Ιουν",Jul:"Ιουλ",Aug:"Αυγ",Sep:"Σεπτ",Oct:"Οκτ",Nov:"Νοε",Dec:"Δεκ"},transition:{carriers:["Κρούσματα"],active:["Ενεργά κρούσματα"],infected_distribution:["Υπό διερεύνηση ή άγνωστης προέλευσης","Σχετιζόμενα με ήδη γνωστό κρούσμα","Σχετιζόμενα με ταξίδι από το εξωτερικό"],infected_distribution_men:["0-17","18-39","40-64","65+"],predicted_deaths:["χαμηλότερο εύρος","πρόβλεψη","ανώτερο εύρος"],predicted_true_inf:["Με βάση την ημερήσια ενημέρωση","«Πραγματικός» αριθμός μολύνσεων"],serious:["Κρίσιμη κατάσταση"],deaths:["Θάνατοι"],tests:["Δείγματα που έχουν ελεγχθεί","Βρέθηκαν θετικοί"],agtests:["Rapid Ag"],rt_repro:["Βασικός αναπαραγωγικός αριθμός"],rj_repro:["Αναπαραγωγικός αριθμός"],infection_fatality_rate:["IIFR"]},unit:{carriers:"",active:"",infected_distribution:"",infected_distribution_men:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",tests:"",agtests:"",rt_repro:"",rj_repro:"",infection_fatality_rate:["%"]},demography:{sum:"Σύνολο",men:"Άνδρες",women:"Γυναίκες",cases:"Κρούσμ.",deaths:"Θάνατοι",serious:"Διασωλην."},prefectures:{increasing:"αυξητική",decreasing:"καθοδική",flat:"επίπεδη",green:"Επίπεδο 1. Ετοιμότητας",yellow:"Επίπεδο 2. Επιτήρησης",orange:"Επίπεδο 3. Αυξημένης Επιτήρησης",red:"Επίπεδο 4. Αυξημένου Κινδύνου"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]},en:{change:"Daily: ",total:"Total: ",male:"Male",female:"Fem.",months:{Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec"},transition:{carriers:["Tested Positive"],active:["Active Cases"],infected_distribution:["Still under investigation or of unknown origin","Related to an already known case","Related to travel from abroad"],demography_total2:["","",""],predicted_deaths:["lower range","projected","upper range"],predicted_true_inf:["From daily report","True number of newly infected"],serious:["Serious"],deaths:["Deaths"],tests:["Tested","Found Positive"],agtests:["Rapid Ag"],rj_repro:["Reproduction Number"],rt_repro:["Effective Reproduction Number"],infection_fatality_rate:["IIFR"]},unit:{carriers:"",active:"",demography_total2:"",infected_distribution:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",tests:"",agtests:"",rt_repro:"",rj_repro:"",infection_fatality_rate:""},demography:{sum:"Sum",men:"Men",women:"Women",cases:"Cases",deaths:"Deaths",serious:"Serious"},prefectures:{increasing:"increasing",decreasing:"decreasing",flat:"flat",green:"Επίπεδο 1. Ετοιμότητας",yellow:"Επίπεδο 2. Επιτήρησης",orange:"Επίπεδο 3. Αυξημένης Επιτήρησης",red:"Επίπεδο 4. Αυξημένου Κινδύνου"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]}},init=()=>{const e=e=>String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),t=()=>{$(".transition.nationwide").each(function(){r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})},a=()=>{$(".transition").each(function(){$(this).find(".axis-chart").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)"),$(this).find(".axis-cover").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)")})},r=(t,a,r,o=!1)=>{const s=(e,t,a,r,o)=>{let s=COLORS.default,i=n(a,r,!0);if(""===t&&"carriers"===e&&(i<20200328&&(s=COLORS.measures[o]),i>=20200328&&(s=COLORS.measures[o+1]),i>=20200601&&(s=COLORS.measures[o+3]),i>=20200615&&(s=COLORS.measures[o+5]),i>=20200701&&(s=COLORS.measures[o+7]),i>=20200715&&(s=COLORS.measures[o+9]),i>=20200720&&(s=COLORS.measures[o+2]),i>=20200815&&(s=COLORS.measures[o+6]),i>=20200914&&(s=COLORS.measures[o+4])),"3"===t&&("carriers"!==e&&"deaths"!==e||i>=20200615&&(s=COLORS.athensopen)),"1"===t&&("carriers"!==e&&"deaths"!==e||i>=20200601&&(s=COLORS.athensopen)),""===t&&"infected_distribution"===e&&(s=COLORS.infected_distribution[o]),""===t&&"tests"===e&&(s=COLORS.pcrtests[o]),""===t&&"predicted_true_inf"===e&&(s=COLORS.pcrtests[o]),""===t&&"predicted_deaths"===e&&(s=COLORS.predicted_deaths[o]),""===t&&"agtests"===e&&(s=COLORS.pcrtests[o]),"rt_repro"===e){const e=new Date;s=i<=[e.getFullYear(),`${e.getMonth()+1}`.padStart(2,"0"),`${e.getDate()}`.padStart(2,"0")].join("")?COLORS.default:"#242A3C"}return s},n=(e,t,a)=>{let r=new Date(e[0],e[1]-1,e[2]);r.setDate(r.getDate()+t);let o="",s=r.getFullYear(),n=r.getMonth()+1,i=r.getDate();if(a){o=1e4*parseInt(s)+100*parseInt(n)+parseInt(i)}else"gr"===LANG&&(o=n+"/"+i),"en"===LANG&&(o=n+"/"+i);return o};function i(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}let d=t.find(".main-chart").empty().html("<canvas></canvas>"),l=d.find("canvas")[0],c=t.find(".switch.selected").attr("value"),p=!!t.find(".checkbox.moving-average").hasClass("on"),g=gData.transition[a];if(""!==r&&(g=gData["prefectures-data"][parseInt(r)-1][a]),void 0!==g){let u=g.from,f=g.values;((t,a)=>{let r=0,o=0;for(let e=0;e<a.length;e++)for(let t=0;t<a[0].length;t++)r+=a[e][t],e===a.length-1&&(o+=a[e][t]);if("tests"===t.attr("code")){var s=a.reduce(function(e,t){return t.forEach(function(t,a){e[a]=(e[a]||0)+t}),e},[]);let e=a[a.length-1];r=i(s[0],1),o-=e[1]}if("predicted_true_inf"===t.attr("code")||"predicted_deaths"===t.attr("code")){s=a.reduce(function(e,t){return t.forEach(function(t,a){e[a]=(e[a]||0)+t}),e},[]);let e=a[a.length-1];r=i(s[1],1),o-=e[1]}"rj_repro"!==t.attr("code")&&"rt_repro"!==t.attr("code")&&"infection_fatality_rate"!==t.attr("code")||(r=Math.round(1e3*a[a.length-1][0])/1e3,o=Math.round(1e3*(a[a.length-1][0]-a[a.length-2][0]))/1e3);var n="";"active"===t.attr("code")&&(n="~"),r=e(r),"-"!==(o=e(o)).charAt(0)&&(o="+"+o);let d=t.find(".latest");d.find(".value").text(n+r),d.find(".unit").text(LABELS[LANG].unit[t.attr("code")]),d.find(".type").text(LABELS[LANG].total),d.find(".change").text(LABELS[LANG].change+o)})(t,f);var h=!0;"rt_repro"!=a&&"infection_fatality_rate"!=a||(h=!1);let b={type:"bar",data:{labels:[],datasets:[]},options:{maintainAspectRatio:!1,animation:{duration:o?1e3:0},legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!1,callbacks:{title:function(e){let a=e[0].xLabel.trim();return"gr"===LANG&&(a="Στις "+a),"en"===LANG&&(a="As of "+a),a+" "+t.find(".switch.selected").text()},label:function(t,r){let o=[],s=0;r.datasets.forEach(function(r,n){if("reproduction_rj_infected"==a){if(root_rj=gData.transition.reproduction_rj.values,!p||n>=1){var i=void 0!==root_rj[t.index]?root_rj[t.index]:"n/a";o.push(r.label+": "+e(r.data[t.index])+" | "+LABELS[LANG].unit[a]+LABELS[LANG].transition.reproduction_rj+": "+i),s+=r.data[t.index]}}else if("predicted_deaths"==a){root_pd=gData.transition.predicted_deaths.values;var d=root_pd[t.index];if(0==d[0]&&0==d[2])"πρόβλεψη"!=r.label&&"projected"!=r.label||o.push(LABELS[LANG].transition.deaths+": "+e(r.data[t.index]));else{if("πρόβλεψη"==r.label||"projected"==r.label)var l=parseFloat(e(r.data[t.index])).toFixed(2);else l=e(r.data[t.index]);o.push(r.label+": "+l+" "+LABELS[LANG].unit[a])}}else"infection_fatality_rate"==a?(o.push(r.label+": "+e(r.data[t.index])+LABELS[LANG].unit[a]),s+=r.data[t.index]):(!p||n>=1)&&(o.push(r.label+": "+e(r.data[t.index])+" "+LABELS[LANG].unit[a]),s+=r.data[t.index])}),o.reverse();let n=p?3:2;return"predicted_deaths"==!a&&r.datasets.length>=n&&o.push(LABELS[LANG].total+": "+e(s)+" "+LABELS[LANG].unit[a]),o}}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1,zeroLineColor:"rgba(255,255,0,0.7)"},ticks:{fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:e=>" "+e+" "}}],yAxes:[{location:"bottom",stacked:!0,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{beginAtZero:h,fontColor:"transparent"}}]},layout:{padding:{left:10}}}};"predicted_true_inf"==a&&(b.options.scales.xAxes=[{stacked:!0,gridLines:{drawOnChartArea:!1,tickMarkLength:10,color:"rgba(255, 255, 255, 0.3)"},ticks:{autoSkip:!0,fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:e=>" "+e+" "}}],b.options.scales.yAxes=[{stacked:!1,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{fontColor:"transparent",userCallback:function(e,t,a){return e=(e=(e=e.toString()).split(/(?=(?:...)*$)/)).join(",")}}}]),"infected_distribution"==a&&(b.options.tooltips.caretSize=0,b.options.tooltips.titleFontSize=12,b.options.tooltips.bodyFontSize=11,b.options.tooltips.bodySpacing=0,b.options.tooltips.titleSpacing=0,b.options.tooltips.xPadding=10,b.options.tooltips.yPadding=10,b.options.tooltips.cornerRadius=2,b.options.tooltips.titleMarginBottom=2);for(let e=0;e<f[0].length;e++){if(b.data.datasets.push({label:LABELS[LANG].transition[a][e],backgroundColor:[],data:[]}),"rj_repro"===a||"rt_repro"===a||"infection_fatality_rate"===a){let e=b.data.datasets[b.data.datasets.length-1];e.type="line",e.fill=!1,e.pointRadius=2,e.pointBorderColor="#EC2",e.borderColor="#EC2"}if("predicted_deaths"===a){let e=b.data.datasets[b.data.datasets.length-1];"πρόβλεψη"!=e.label&&"projected"!=e.label||(e.type="line",e.fill=!1,e.pointRadius=2,e.pointBorderColor="#EC2",e.borderColor="#EC2")}}let L="",m=[];for(let e=0;e<f[0].length;e++)m.push(0);if(f.forEach(function(e,t){let o=s(a,r,u,t,0);b.data.labels.push(n(u,t,!1));for(let o=0;o<f[0].length;o++){m[o]+=e[o];let n=e[o];""===e[o]&&(n=0),n<0&&("total"===c||"carriers"===a||"infected_distribution"===a||"predicted_deaths"===a||"deaths"===a||"tests"===a||"agtests"===a)&&(n=0),"total"===c&&(n=m[o]),b.data.datasets[o].data.push(n),b.data.datasets[o].backgroundColor.push(s(a,r,u,t,o))}L=o}),d.width(Math.max(8*b.data.labels.length,d.width())),p){let e=7,t={type:"line",label:LABELS[LANG].movingAverage,fill:!1,borderColor:"#FBA",borderWidth:3,pointRadius:0,data:[]};for(let a=0;a<b.data.datasets[0].data.length;a++){let r=null;if(a>=e){r=0;for(let t=0;t<e;t++)b.data.datasets.forEach(function(e,o){r+=parseInt(e.data[a-t])});r/=e}t.data.push(r)}b.data.datasets.unshift(t)}((e,t)=>{const a=e=>{let t=e.split("/");return t[1]+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t[0])-1]};let r=e.find("h5.updated");if(!r.hasClass("show")){let e=t.data.labels[t.data.labels.length-1],o={gr:"Στις "+a(e),en:"As of "+a(e)};r.text(o[LANG]),r.addClass("show")}})(t,b),((t,a,r)=>{let o=t.find(".axis-chart").empty().html("<canvas></canvas>").find("canvas")[0],s={type:"bar",data:a,options:{maintainAspectRatio:!1,legend:{display:!1},title:{display:!1},scales:{xAxes:[{stacked:r,drawBorder:!1,gridLines:{display:!1},ticks:{fontColor:"rgba(255,255,255,0.0)",maxRotation:0,minRotation:0}}],yAxes:[{id:"axisScale",location:"bottom",stacked:r,gridLines:{drawBorder:!1,display:!1},ticks:{beginAtZero:!0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){if(Math.floor(t)===t)return e(t.toString())}}}]}}};s.data.datasets.forEach(function(e,t){e.backgroundColor="transparent",e.borderColor="transparent",e.pointBorderColor="transparent"}),s.data.labels.forEach(function(e,t){}),window.myChart=new Chart(o.getContext("2d"),s);let n=window.myChart.scales.axisScale.max,i=window.myChart.scales.axisScale.min,d=0;switch(Math.max(n.toString().length,i.toString().length)){case 1:d=36;break;case 2:d=40;break;case 3:d=48;break;case 4:d=54;break;case 5:d=66;break;case 6:d=72;break;case 7:d=78}t.find(".axis-cover").width(d.toString()+"px")})(t,$.extend(!0,{},b.data),!0),window.myChart=new Chart(l.getContext("2d"),b)}},o=e=>{let t=e.find(".main-chart");e.find(".main-chart-wrapper").animate({scrollLeft:t.width()},0)},s=(e,t)=>{let a=0;return e.forEach(function(e,t){e.forEach(function(e,t){a+=e})}),a},n=()=>{$("#greece-map").empty();Highcharts.mapChart("greece-map",{navigation:{buttonOptions:{enabled:!1}},legend:{enabled:!1},credits:{enabled:!1},chart:{map:"countries/gr/gr-all"},title:{text:""},subtitle:{text:""},mapNavigation:{enabled:!1},tooltip:{formatter:function(){var e,t=this.point.value,a="";return gData["prefectures-data"].forEach(function(r,o){r.gr!==t[1]&&r.en!==t[1]||(e=r.value,a+='<span style="color:'+COLORS.selected+'">'+r[LANG]+"</span><br>"+LABELS[LANG].transition.carriers+" : "+e)}),a}},series:[{stickyTracking:!0,data:[["gr-at",[1,"Attica"]],["gr-gc",[2,"Central Greece"]],["gr-mc",[3,"Central Macedonia"]],["gr-cr",[4,"Crete"]],["gr-mt",[5,"Eastern Macedonia and Thrace"]],["gr-ep",[6,"Epirus"]],["gr-ii",[7,"Ionian Islands"]],["gr-ma",[8,"Mount Athos"]],["gr-an",[9,"North Aegean"]],["gr-pp",[10,"Peloponnese"]],["gr-as",[11,"South Aegean"]],["gr-ts",[12,"Thessaly"]],["gr-gw",[13,"Western Greece"]],["gr-mw",[14,"Western Macedonia"]]],name:"",borderColor:"black",borderWidth:.1,states:{hover:{color:"#eecc22"}},dataLabels:{enabled:!1,format:"{point.name}"},point:{events:{mouseOver:function(e){d(e.target.value[0]),l(e.target.value[0])}}}}]})},i=()=>{gData["prefectures-details"].forEach(function(e,t){var a,r,o,s=gData["prefectures-details"][t][LANG],n=e.twoweektrendlatest,i=e.newcasesperweekpop,d=Math.floor(i),l=e.last14days_rolling.values,c=e.color,p=LABELS[LANG].prefectures[e.color],g="",h=Array.isArray(e.rj_value)?e.rj_value[1].slice(-1).pop():"";Array.isArray(e.rj_value)&&(e.rj_value[0][1]<e.rj_value[1][1]?(o="increasing",g=LABELS[LANG].prefectures.increasing):e.rj_value[0][1]>e.rj_value[1][1]?(o="decreasing",g=LABELS[LANG].prefectures.decreasing):(o="flat",g=LABELS[LANG].prefectures.flat)),n>=0&&n<=5?(a="flat",r=LABELS[LANG].prefectures.flat):n>5?(a="increasing",r=LABELS[LANG].prefectures.increasing):(a="decreasing",r=LABELS[LANG].prefectures.decreasing),$("#tbodyid").append(`<tr>\n\t\t\t<td class="${c}" title="${p}">${s}</td>\n\t\t\t\t<td class="${a}"><h4 class="m-0 font-weight-bold" style="color: inherit;">${e.twoweektrendlatest}%</h4><span class="${a}">${r}</span></td>\n\t\t\t\t<td><span id="sparkline${t}"></span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${e.totalcases}</h4></td>\n\t\t\t\t<td><div class="progress"><div role="progressbar" aria-valuenow="${i}" aria-valuemin="0" aria-valuemax="200" class="progress-bar ${c}" style="width: ${d}%;color: #fff!important;">${i}</div></div></td>\n\t\t\t\t<td class="${o}"><h4 class="m-0 font-weight-bold" style="color: inherit;">${h}</h4><span>${g}</span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${e.population}</h4></td>\n\t\t\t</tr>`),$("#sparkline"+t).sparkline(l,{type:"line",width:100,height:50,lineColor:"#0083CD",fillColor:"rgba(0,131,205,0.2)",minSpotColor:!0,maxSpotColor:!0})}),$("#search-nomous").on("keyup",function(){var e=$(this).val().toLowerCase();$("#tbodyid tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})}),$("#prefectures").tablesorter({theme:"blackice",widgets:["saveSort"],widgetOptions:{saveSort:!0},sortList:[[0,0]]}),$("#pref-updated").text(gData.updated.lastprefecture[LANG])},d=t=>{let a=$("#region-chart").empty().html("<canvas></canvas>"),r=a.find("canvas")[0],o=$("#select-pref-type").val(),n={type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]},options:{aspectRatio:.4,animation:{duration:1e3},responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(e){return gData["prefectures-data"].forEach(function(t,a){t.gr!==e[0].yLabel&&t.en!==e[0].yLabel||$("#select-prefecture").val()!==t.code&&l(t.code)}),e[0].yLabel},label:function(e,t){return e.xLabel+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{position:"top",gridLines:{color:"rgba(255,255,255,0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){return e(t)}}}],yAxes:[{gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};a.outerWidth()>=400&&(n.options.aspectRatio=1.3),""!==t&&(n.options.animation.duration=0);let i=[];gData["prefectures-data"].forEach(function(e,t){i.push({name:gData["prefectures-data"][t][LANG],value:s(e[o].values,e.code),code:(t+1).toString()})}),i.sort((e,t)=>e.value<t.value?1:e.value>t.value?-1:0),i.forEach(function(e,a){n.data.labels.push(e.name),n.data.datasets[0].data.push(e.value),t==e.code?n.data.datasets[0].backgroundColor.push(COLORS.selected):n.data.datasets[0].backgroundColor.push((e=>{let t=$("#select-pref-type").val(),a="rgba(90, 90, 90, 0.6)",r=s(gData["prefectures-data"][parseInt(e.code)-1][t].values,e.code);return r>=1&&(a=COLORS.dark,0===gThresholds[t]&&(a=COLORS.default)),r>=gThresholds[t]&&gThresholds[t]>=1&&(a=COLORS.default),a})(e))});let d=r.getContext("2d");window.myChart=new Chart(d,n)},l=e=>{$("#select-prefecture").val(e),$(".transition.prefecture").each(function(){$(this).attr("pref",e),$(this).find("h3").find("span").text(gData["prefectures-data"][parseInt(e)-1][LANG]),r($(this),$(this).attr("code"),$(this).attr("pref"),!0),o($(this))})};$.getJSON("https://raw.githubusercontent.com/Sandbird/covid19-Greece/master/greece.json",function(r){gData=r,(()=>{const e=e=>{let t=e.sort((e,t)=>e-t),a=[Math.floor(e.length/2),Math.ceil(e.length/2)];return(t[a[0]]+t[a[1]])/2};for(thType in gThresholds){let t=[];gData["prefectures-data"].forEach(function(e,a){"carriers"!==e[thType]&&"deaths"!==e[thType]||t.push(s(e[thType].values),e.code)}),gThresholds[thType]=e(t)}})(),t(),(()=>{$wrapper=$("#demography-chart-group-cases").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:"Κρούσματα"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]};var t={};gData.demography_group_cases.categories.forEach(function(e,a){t[a]=LABELS[LANG].months[e]}),e.xAxis.categories=t,gData.demography_group_cases.age_groups.forEach(function(t,a){t=(t=t.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),e.series.push({name:t,data:gData.demography_group_cases.cases[a]})}),$("#demography-chart-group-cases").highcharts(e)})(),(()=>{$wrapper=$("#demography-chart-group-deaths").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:"Θάνατοι"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]};var t={};gData.demography_group_deaths.categories.forEach(function(e,a){t[a]=LABELS[LANG].months[e]}),e.xAxis.categories=t,gData.demography_group_deaths.age_groups.forEach(function(t,a){t=(t=t.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),e.series.push({name:t,data:gData.demography_group_deaths.deaths[a]})}),$("#demography-chart-group-deaths").highcharts(e)})(),(()=>{$wrapper=$("#demography-chart-serious").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={type:"horizontalBar",data:{labels:[],datasets:[{hidden:!0,label:LABELS[LANG].demography.sum,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.men,backgroundColor:COLORS.men,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.women,backgroundColor:"#BBCDB3",borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(e){let t=e[0].yLabel,a=0;return e.forEach(function(e,t){a+=e.xLabel}),t+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){return e(t)}}}],yAxes:[{stacked:!1,barPercentage:1,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(t.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(t.options.aspectRatio=2.3),gData.demography_serious.forEach(function(e,a){t.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)t.data.datasets[a].data.push(e[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,t)})(),(()=>{$wrapper=$("#demography-chart").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(e){let t=e[0].yLabel,a=0;return e.forEach(function(e,t){a+=e.xLabel}),t+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){return e(t)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(t.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(t.options.aspectRatio=2.3),gData.demography_sum.forEach(function(e,a){t.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)t.data.datasets[a].data.push(e[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,t)})(),(()=>{$wrapper=$("#demography-chart-men").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(e){let t=e[0].yLabel,a=0;return e.forEach(function(e,t){a+=e.xLabel}),t+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){return e(t)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(t.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(t.options.aspectRatio=2.3),gData.demography_men.forEach(function(e,a){t.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)t.data.datasets[a].data.push(e[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,t)})(),(()=>{$wrapper=$("#demography-chart-women").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(e){let t=e[0].yLabel,a=0;return e.forEach(function(e,t){a+=e.xLabel}),t+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(t,a,r){return e(t)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(t.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(t.options.aspectRatio=2.3),gData.demography_women.forEach(function(e,a){t.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)t.data.datasets[a].data.push(e[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,t)})(),n(),d(""),l("1"),i(),$(".updated-last").text(gData.updated.last[LANG]),$(".updated-demography-cases").text(gData.updated.demography[LANG]),$(".updated-demography-deaths").text(gData.updated.demography[LANG]),$(".updated-demography-serious").text(gData.updated.demography[LANG]),$(".updated-demography-sum").text(gData.updated.demography[LANG]),$(".updated-demography-men").text(gData.updated.demography[LANG]),$(".updated-demography-women").text(gData.updated.demography[LANG]),a();var o=$("#predicted_scroller").scrollLeft(),c=(new Date).getWeek();$("#predicted_scroller").animate({scrollLeft:o-10*c},800),$("#cover-block").fadeOut()}),$(".transition").find(".switch").on("click",function(){let e=$(this).closest(".transition");$(this).siblings(".switch").removeClass("selected"),$(this).addClass("selected"),r(e,e.attr("code"),e.attr("pref"),!0)}),$("#select-prefecture").on("change",function(){let e=$(this).val();l(e)}),$("#select-pref-type").on("change",function(){d("")}),$(".more").on("click",function(){$(this).closest("p.notes").addClass("show")}),$(".checkboxes").find(".checkbox").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on");let e=$(this).closest(".transition");r(e,e.attr("code"),e.attr("pref"),!1)}),$('a[href^="#"]').click(function(){let e=$(this).attr("href"),t=$(e).offset().top;return $("body,html").animate({scrollTop:t},400,"swing"),!1})};function isInt(e){return/^-?[0-9]+$/.test(e)}Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1),t=(new Date(this.getFullYear(),this.getMonth(),this.getDate())-e+1)/864e5;return Math.ceil(t/7)},$(function(){init()});