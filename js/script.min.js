let gData,gRegions=[],gThresholds={carriers:0,deaths:0};const LANG=$("html").attr("lang"),RANDOMSTRING=Math.random().toString(36).substring(7),SCROLLBAR_WIDTH=window.innerWidth-$(window).width(),COLORS={default:"#3DC",men:"#5987A5",women:"#FEA",second:"#FEA",athensopen:"#5987A5",thessopen:"#3BA9B0",deaths:"#FB8",serious:"#FEA",infected_distribution:"#6F6587,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),infected_distribution_men:"#48C7A6,#3BA9B0,#5987A5,#6F6587".split(","),predicted_deaths:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),pcrtests:"#3DC,#5987A5,#3BA9B0,#48C7A6,#86E18D,#D5F474".split(","),icu_entry_exit:"#cf8490,#88BBAA".split(","),vaccinations:"#6F6587,#5987A5".split(","),measures:"#90CFB5,#8FBDE0,#689AAB,#AADCD2,#3DC,#88BBAA,#BADDAD,#BBCDB3,#FAF28C,#DFEA8B,#F3EF89,#3BA9B0,#F4F4B2,#CCAC8E,#FBDEDE,#F8B2BC,#F59598,#EFA796,#FEBD7D,#CEB4D6,#B5B3DA".split(","),measures2:"#3DC,#FEA,#5987A5,#3BA9B0,#86E18D,#D5F474,#FB8,#EC2,#CAF0F8".split(","),dark:"#399",selected:"#EC2"},LABELS={gr:{change:"Τελευταία μεταβολή: ",total:"Σύνολο: ",daily_cases:"Ημερ. Κρ.: ",male:"Ανδ.",female:"Γυν.",months_pref:{Jan:"Ιαν",Feb:"Φεβρ",Mar:"Μαρτ",Apr:"Απρ",May:"Μαι",Jun:"Ιουν",Jul:"Ιουλ",Aug:"Αυγ",Sep:"Σεπτ",Oct:"Οκτ",Nov:"Νοε",Dec:"Δεκ"},months:["Ιανουαρίου","Φεβρουαρίου","Μαρτίου","Απριλίου","Μαΐου","Ιουνίου","Ιουλίου","Αυγούστου","Σεπτεμβρίου","Οκτωβρίου","Νοεμβρίου","Δεκεμβρίου"],transition:{carriers:["Κρούσματα"],active:["Ενεργά κρούσματα"],infected_distribution:["Υπό διερ.η ή άγν. προέλευσης","Σχετιζ. με ήδη γνωστό κρούσμα","Σχετιζ. με ταξίδι εξωτερικού"],infected_distribution_men:["0-17","18-39","40-64","65+"],death_distribution_men:["0-17","18-39","40-64","65+"],intensive_distribution_men:["0-17","18-39","40-64","65+"],infected_distribution_total:["0-17","18-39","40-64","65+"],death_distribution_total:["0-17","18-39","40-64","65+"],intensive_distribution_total:["0-17","18-39","40-64","65+"],infected_distribution_women:["0-17","18-39","40-64","65+"],death_distribution_women:["0-17","18-39","40-64","65+"],intensive_distribution_women:["0-17","18-39","40-64","65+"],predicted_deaths:["χαμηλότερο εύρος","πρόβλεψη","ανώτερο εύρος"],predicted_true_inf:["Ημερ. ενημέρωση","Πραγμ. αριθμ."],serious:["Κρίσιμη κατάσταση"],deaths:["Θάνατοι"],icu_percentages:["ΜΕΘ CoViD","Κλινών CoViD"],icu_entry_exit:["Εισαγωγές ασθενών","Εξιτήρια λόγω ίασης"],tests:["Δείγματα που ελέγχθ.","Βρέθηκαν θετικοί"],agtests:["Rapid Ag"],vaccinations:["Εμβολιασμοί 2ης δόσης","Εμβολιασμοί 1ης δόσης","Συνολικοί εμβολιασμοί"],rt_repro:["Βασικός αναπαραγωγικός αριθμός"],rj_repro:["Αναπαραγωγικός αριθμός"],infection_fatality_rate:["IIFR"],positivity_rate:["Μόνο PCR"],positivity_rate_combined:["PCR+Rapid"]},unit:{carriers:"",active:"",infected_distribution:"",infected_distribution_men:"",death_distribution_men:"",intensive_distribution_men:"",infected_distribution_total:"",death_distribution_total:"",intensive_distribution_total:"",infected_distribution_women:"",death_distribution_women:"",intensive_distribution_women:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",icu_percentages:["%"],icu_entry_exit:"",tests:"",agtests:"",vaccinations:"",rt_repro:"",rj_repro:"",infection_fatality_rate:["%"],positivity_rate:["%"]},demography:{sum:"Σύνολο",men:"Άνδρες",women:"Γυναίκες",cases:"Κρούσμ.",deaths:"Θάνατοι",serious:"Διασ."},prefectures:{increasing:"αυξητική",decreasing:"καθοδική",flat:"επίπεδη",green:"Επίπεδο 1. Ετοιμότητας",orange:"Επίπεδο Α. Επιτήρησης",yellow:"Επίπεδο Α. Επιτήρησης",red:"Επίπεδο Β. Αυξημένου Κινδύνου",redplus:"Επίπεδο Γ. Πολύ Αυξημένου Κινδύνου",grey:"Επίπεδο Γ. Συναγερμού",lightgrey:"Δεν υπάρχουν δεδομένα",danger:"Επικινδυνότητα",latest_cases:"Τελευταίες 14 μέρες (νέα κρούσματα)",new_unemployed:"Νέες αιτήσεις ανέργων",total_unemployed:"Σύνολο ανέργων"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]},en:{change:"Daily: ",total:"Total: ",daily_cases:"Daily Cases: ",male:"Male",female:"Fem.",months_pref:{Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],transition:{carriers:["Tested Positive"],active:["Active Cases"],infected_distribution:["Still under investigation or of unknown origin","Related to an already known case","Related to travel from abroad"],infected_distribution_men:["0-17","18-39","40-64","65+"],death_distribution_men:["0-17","18-39","40-64","65+"],intensive_distribution_men:["0-17","18-39","40-64","65+"],infected_distribution_total:["0-17","18-39","40-64","65+"],death_distribution_total:["0-17","18-39","40-64","65+"],intensive_distribution_total:["0-17","18-39","40-64","65+"],infected_distribution_women:["0-17","18-39","40-64","65+"],death_distribution_women:["0-17","18-39","40-64","65+"],intensive_distribution_women:["0-17","18-39","40-64","65+"],demography_total2:["","",""],predicted_deaths:["lower range","projected","upper range"],predicted_true_inf:["Daily report","Spec. of newly infected"],serious:["Serious"],deaths:["Deaths"],icu_percentages:["ICU Beds coverage","Non-ICU Beds coverage"],icu_entry_exit:["Admissions","Discharges"],tests:["Tested","Found Positive"],agtests:["Rapid Ag"],vaccinations:["2nd dose vaccinations","1st dose vaccinations","Total vaccinations"],rj_repro:["Reproduction Number"],rt_repro:["Effective Reproduction Number"],infection_fatality_rate:["IIFR"],positivity_rate:["Only PCR"],positivity_rate_combined:["PCR+Rapid"]},unit:{carriers:"",active:"",demography_total2:"",infected_distribution:"",infected_distribution_men:"",death_distribution_men:"",intensive_distribution_men:"",infected_distribution_total:"",death_distribution_total:"",intensive_distribution_total:"",infected_distribution_women:"",death_distribution_women:"",intensive_distribution_women:"",predicted_deaths:"",predicted_true_inf:"",serious:"",deaths:"",icu_percentages:["%"],icu_entry_exit:"",tests:"",agtests:"",vaccinations:"",rt_repro:"",rj_repro:"",infection_fatality_rate:["%"],positivity_rate:["%"]},demography:{sum:"Sum",men:"Men",women:"Women",cases:"Cases",deaths:"Deaths",serious:"Serious"},prefectures:{increasing:"increasing",decreasing:"decreasing",flat:"flat",green:"Level 1. Readiness",orange:"Level 1. Surveillance",yellow:"Level 1. Surveillance",red:"Level 2. Increased Risk",redplus:"Level 3. Very High Risk",grey:"Level 3. Alert",lightgrey:"No available data",danger:"Risk Level",latest_cases:"Last 14 days (new cases)",new_unemployed:"New unemployment claims",total_unemployed:"Total Unemployed"},age:["65+","40-64","18-39","0-17"],age2:["65","40_64","18_39","0_17"]}},init=()=>{const t=t=>String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),e=()=>{$(".transition.nationwide").each(function(){i($(this),$(this).attr("code"),$(this).attr("pref"),!0),r($(this))})},a=()=>{$(".transition").each(function(){$(this).find(".axis-chart").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)"),$(this).find(".axis-cover").css("height","calc(100% - "+SCROLLBAR_WIDTH+"px)")})},i=(e,a,i,r=!1)=>{const o=(t,e,a,i,r)=>{let o=COLORS.default,s=n(a,i,!0);if(""===e&&"carriers"===t&&(s<20200328&&(o=COLORS.measures[r]),s>=20200328&&(o=COLORS.measures[r+1]),s>=20200601&&(o=COLORS.measures[r+3]),s>=20200615&&(o=COLORS.measures[r+5]),s>=20200701&&(o=COLORS.measures[r+7]),s>=20200715&&(o=COLORS.measures[r+9]),s>=20200720&&(o=COLORS.measures[r+2]),s>=20200815&&(o=COLORS.measures[r+6]),s>=20200914&&(o=COLORS.measures[r+4]),s>=20201107&&(o=COLORS.measures[r+11])),"3"===e&&("carriers"!==t&&"deaths"!==t||s>=20200615&&(o=COLORS.athensopen)),"1"===e&&("carriers"!==t&&"deaths"!==t||s>=20200601&&(o=COLORS.athensopen)),""===e&&"infected_distribution"===t&&(o=COLORS.infected_distribution[r]),""!==e||"infected_distribution_men"!==t&&"death_distribution_men"!==t&&"intensive_distribution_men"!==t&&"infected_distribution_total"!==t&&"death_distribution_total"!==t&&"intensive_distribution_total"!==t&&"infected_distribution_women"!==t&&"death_distribution_women"!==t&&"intensive_distribution_women"!==t||(o=COLORS.infected_distribution_men[r]),""===e&&"tests"===t&&(o=COLORS.pcrtests[r]),""===e&&"predicted_true_inf"===t&&(o=COLORS.pcrtests[r]),""===e&&"icu_entry_exit"===t&&(o=COLORS.icu_entry_exit[r]),""===e&&"predicted_deaths"===t&&(o=COLORS.predicted_deaths[r]),""===e&&"agtests"===t&&(o=COLORS.pcrtests[r]),"vaccinations"===t&&(o=COLORS.vaccinations[r]),"rt_repro"===t){const t=new Date;o=s<=[t.getFullYear(),`${t.getMonth()+1}`.padStart(2,"0"),`${t.getDate()}`.padStart(2,"0")].join("")?COLORS.default:"#242A3C"}return o},n=(t,e,a)=>{let i=new Date(t[0],t[1]-1,t[2]);i.setDate(i.getDate()+e);let r="",o=i.getFullYear(),n=i.getMonth()+1,s=i.getDate();if(a){r=1e4*parseInt(o)+100*parseInt(n)+parseInt(s)}else"gr"===LANG&&(r=n+"/"+s),"en"===LANG&&(r=n+"/"+s);return r};function s(t,e){var a=Math.pow(10,e);return Math.round(t*a)/a}let d=e.find(".main-chart").empty().html("<canvas></canvas>"),l=d.find("canvas")[0],c=e.find(".switch.selected").attr("value"),p=!!e.find(".checkbox.moving-average").hasClass("on"),u=gData.transition[a];if(""!==i&&(u=gData["prefectures-data"][parseInt(i)-1][a]),void 0!==u){let f=u.from,b=u.values;((e,a)=>{let i=0,r=0,o=0,n=0;for(let t=0;t<a.length;t++)for(let e=0;e<a[0].length;e++)i+=a[t][e],t===a.length-1&&(r+=a[t][e]);if("tests"===e.attr("code")){var d=a.reduce(function(t,e){return e.forEach(function(e,a){t[a]=(t[a]||0)+e}),t},[]);let t=a[a.length-1];i=s(d[0],1),r-=t[1]}if("predicted_true_inf"===e.attr("code")||"predicted_deaths"===e.attr("code")){d=a.reduce(function(t,e){return e.forEach(function(e,a){t[a]=(t[a]||0)+e}),t},[]);let t=a[a.length-1];i=s(d[1],1),r-=t[1]}"rj_repro"!==e.attr("code")&&"rt_repro"!==e.attr("code")&&"infection_fatality_rate"!==e.attr("code")||(i=Math.round(1e3*a[a.length-1][0])/1e3,r=Math.round(1e3*(a[a.length-1][0]-a[a.length-2][0]))/1e3),"positivity_rate"===e.attr("code")&&(i=Math.round(1e3*a[a.length-1][0])/1e3,r=Math.round(1e3*(a[a.length-1][0]-a[a.length-2][0]))/1e3,o=Math.round(1e3*gData.transition.positivity_rate_combined.values[gData.transition.positivity_rate_combined.values.length-1][0])/1e3,n=Math.round(1e3*(gData.transition.positivity_rate_combined.values[gData.transition.positivity_rate_combined.values.length-1][0]-gData.transition.positivity_rate_combined.values[gData.transition.positivity_rate_combined.values.length-2][0]))/1e3);var l="";if("active"===e.attr("code")&&(l="~"),i=t(i),"-"!==(r=t(r)).charAt(0)&&(r="+"+r),"icu_entry_exit"===e.attr("code")){var c=0,p=0;for(let t=0;t<a.length;t++)c+=a[t][0],p+=a[t][1];c=t(c),p=t(p),"-"!==c.charAt(0)&&(c="+"+c),"-"!==p.charAt(0)&&(p="+"+p);let r=e.find(".latest");r.find(".value").text(l+i),r.find(".unit").text(LABELS[LANG].unit[e.attr("code")]),r.find(".type").text(LABELS[LANG].total),r.find("#admissions").text(LABELS[LANG].transition.icu_entry_exit[0]+": "+c),r.find("#discharged").text(LABELS[LANG].transition.icu_entry_exit[1]+": "+p)}else if("positivity_rate"===e.attr("code")){var u=e.find("#pos_pcr"),g="<span class='unit'>"+LABELS[LANG].unit[e.attr("code")]+"</span>";u.find(".value").html(l+i+g),u.find(".type").text("PCR: "),u.find(".change").text("("+r+")"),o=t(o),"-"!==(n=t(n)).charAt(0)&&(n="+"+n),u=e.find("#pos_combined"),g="<span class='unit'>"+LABELS[LANG].unit[e.attr("code")]+"</span>",u.find(".value").html(l+o+g),u.find(".type").text("PCR+Rapid: "),u.find(".change").text("("+n+")")}else{let t=e.find(".latest");t.find(".value").text(l+i),t.find(".unit").text(LABELS[LANG].unit[e.attr("code")]),t.find(".type").text(LABELS[LANG].total),t.find(".change").text(LABELS[LANG].change+r)}})(e,b);var g=!0;"rt_repro"!=a&&"infection_fatality_rate"!=a&&"positivity_rate"!=a&&"positivity_rate_combined"!=a||(g=!1);let m={type:"bar",data:{labels:[],datasets:[]},options:{maintainAspectRatio:!1,animation:{duration:r?1e3:0},legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!1,callbacks:{title:function(t){let a=t[0].xLabel.trim();return"gr"===LANG&&(a="Στις "+a),"en"===LANG&&(a="As of "+a),a+" "+e.find(".switch.selected").text()},label:function(e,i){let r=[],o=0,n=0;i.datasets.forEach(function(i,s){if("reproduction_rj_infected"==a){if(root_rj=gData.transition.reproduction_rj.values,!p||s>=1){var d=void 0!==root_rj[e.index]?root_rj[e.index]:"n/a";r.push(i.label+": "+t(i.data[e.index])+" | "+LABELS[LANG].unit[a]+LABELS[LANG].transition.reproduction_rj+": "+d),o+=i.data[e.index]}}else if("vaccinations"==a)n+=parseInt(i.data[e.index]),(!p||s>=1)&&(r.push(i.label+": "+t(i.data[e.index])+" "+LABELS[LANG].unit[a]),o+=i.data[e.index]);else if("predicted_deaths"==a){root_pd=gData.transition.predicted_deaths.values;var l=root_pd[e.index];if(0==l[0]&&0==l[2])"πρόβλεψη"!=i.label&&"projected"!=i.label||r.push(LABELS[LANG].transition.deaths+": "+t(i.data[e.index]));else{if("πρόβλεψη"==i.label||"projected"==i.label)var c=parseFloat(t(i.data[e.index])).toFixed(2);else c=t(i.data[e.index]);r.push(i.label+": "+c+" "+LABELS[LANG].unit[a])}}else"infection_fatality_rate"==a||"positivity_rate"==a?(r.push(i.label+": "+t(i.data[e.index])+LABELS[LANG].unit[a]),o+=i.data[e.index]):(!p||s>=1)&&(r.push(i.label+": "+t(i.data[e.index])+" "+LABELS[LANG].unit[a]),o+=i.data[e.index])}),r.reverse();let s=p?3:2;return"predicted_deaths"==!a&&i.datasets.length>=s&&r.push(LABELS[LANG].total+": "+t(o)+" "+LABELS[LANG].unit[a]),"vaccinations"==a&&r.push(LABELS[LANG].transition.vaccinations[2]+": "+t(o)+" "+LABELS[LANG].unit[a]),r}}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1,zeroLineColor:"rgba(255,255,0,0.7)"},ticks:{fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:t=>" "+t+" "}}],yAxes:[{location:"bottom",stacked:!0,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{beginAtZero:g,fontColor:"transparent"}}]},layout:{padding:{left:10}}}};"predicted_true_inf"==a&&(m.options.scales.xAxes=[{stacked:!0,gridLines:{drawOnChartArea:!1,tickMarkLength:10,color:"rgba(255, 255, 255, 0.3)"},ticks:{autoSkip:!0,fontColor:"rgba(255,255,255,0.7)",maxRotation:0,minRotation:0,callback:t=>" "+t+" "}}],m.options.scales.yAxes=[{stacked:!1,gridLines:{display:!0,zeroLineColor:"rgba(255,255,255,0.7)",borderDash:[3,1],color:"rgba(255, 255, 255, 0.3)"},ticks:{fontColor:"transparent",userCallback:function(t,e,a){return t=(t=(t=t.toString()).split(/(?=(?:...)*$)/)).join(",")}}}]),"infected_distribution"!=a&&"infected_distribution_men"!=a&&"death_distribution_men"!=a&&"intensive_distribution_men"!=a&&"infected_distribution_total"!==a&&"death_distribution_total"!==a&&"intensive_distribution_total"!==a&&"infected_distribution_women"!==a&&"death_distribution_women"!==a&&"intensive_distribution_women"!==a||(m.options.tooltips.caretSize=0,m.options.tooltips.titleFontSize=12,m.options.tooltips.bodyFontSize=11,m.options.tooltips.bodySpacing=0,m.options.tooltips.titleSpacing=0,m.options.tooltips.xPadding=10,m.options.tooltips.yPadding=10,m.options.tooltips.cornerRadius=2,m.options.tooltips.titleMarginBottom=2);for(let t=0;t<b[0].length;t++){if(m.data.datasets.push({label:LABELS[LANG].transition[a][t],backgroundColor:[],data:[]}),"rj_repro"===a||"rt_repro"===a||"infection_fatality_rate"===a||"positivity_rate"===a){let t=m.data.datasets[m.data.datasets.length-1];t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2"}if("predicted_deaths"===a){let t=m.data.datasets[m.data.datasets.length-1];"πρόβλεψη"!=t.label&&"projected"!=t.label||(t.type="line",t.fill=!1,t.pointRadius=2,t.pointBorderColor="#EC2",t.borderColor="#EC2")}}let v="",L=[];for(let t=0;t<b[0].length;t++)L.push(0);if(b.forEach(function(t,e){let r=o(a,i,f,e,0);m.data.labels.push(n(f,e,!1));for(let r=0;r<b[0].length;r++){L[r]+=t[r];let n=t[r];""===t[r]&&(n=0),n<0&&("total"===c||"active"===a||"carriers"===a||"infected_distribution"===a||"infected_distribution_men"===a||"death_distribution_men"===a||"predicted_deaths"===a||"deaths"===a||"tests"===a||"agtests"===a||"vaccinations"===a)&&(n=0),"total"===c&&(n=L[r]),"total"===c&&n<0&&"active"===a&&(n=0),m.data.datasets[r].data.push(n),m.data.datasets[r].backgroundColor.push(o(a,i,f,e,r))}v=r}),d.width(Math.max(8*m.data.labels.length,d.width())),p){let t=7,e={type:"line",label:LABELS[LANG].movingAverage,fill:!1,borderColor:"#FBA",borderWidth:3,pointRadius:0,data:[]};for(let a=0;a<m.data.datasets[0].data.length;a++){let i=null;if(a>=t){i=0;for(let e=0;e<t;e++)m.data.datasets.forEach(function(t,r){i+=parseInt(t.data[a-e])});i/=t}e.data.push(i)}m.data.datasets.unshift(e)}var h=!0;if("predicted_true_inf"==a||"positivity_rate"==a||"icu_entry_exit"==a)h=!1;if("positivity_rate"==a){let e={type:"line",label:LABELS[LANG].transition.positivity_rate_combined,fill:!1,borderColor:"#FBA",pointBorderColor:"#EC2",pointRadius:2,data:[],options:{scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{stacked:!1,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};gData.transition.positivity_rate_combined.values.forEach(function(t,a){e.data.push(t[0])}),m.data.datasets.unshift(e)}((t,e)=>{const a=t=>{let e=t.split("/");return e[1]+" "+LABELS[LANG].months[parseInt(e[0])-1]};let i=t.find("h5.updated");if(!i.hasClass("show")){let t=e.data.labels[e.data.labels.length-1],r={gr:"Στις "+a(t),en:"As of "+a(t)};i.text(r[LANG]),i.addClass("show")}})(e,m),((e,a,i)=>{let r=e.find(".axis-chart").empty().html("<canvas></canvas>").find("canvas")[0],o={type:"bar",data:a,options:{maintainAspectRatio:!1,legend:{display:!1},title:{display:!1},scales:{xAxes:[{stacked:i,drawBorder:!1,gridLines:{display:!1},ticks:{fontColor:"rgba(255,255,255,0.0)",maxRotation:0,minRotation:0}}],yAxes:[{id:"axisScale",location:"bottom",stacked:i,gridLines:{drawBorder:!1,display:!1},ticks:{beginAtZero:!0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){if(Math.floor(e)===e)return t(e.toString())}}}]}}};o.data.datasets.forEach(function(t,e){t.backgroundColor="transparent",t.borderColor="transparent",t.pointBorderColor="transparent"}),o.data.labels.forEach(function(t,e){}),window.myChart=new Chart(r.getContext("2d"),o);let n=window.myChart.scales.axisScale.max,s=window.myChart.scales.axisScale.min,d=0;switch(Math.max(n.toString().length,s.toString().length)){case 1:d=36;break;case 2:d=40;break;case 3:d=48;break;case 4:d=54;break;case 5:d=66;break;case 6:d=72;break;case 7:d=78}e.find(".axis-cover").width(d.toString()+"px")})(e,$.extend(!0,{},m.data),h),window.myChart=new Chart(l.getContext("2d"),m)}},r=t=>{let e=t.find(".main-chart");t.find(".main-chart-wrapper").animate({scrollLeft:e.width()},0)},o=(t,e)=>{let a=0;return t.forEach(function(t,e){t.forEach(function(t,e){a+=t})}),a},n=function(t){var e=t.split("-");return LABELS[LANG].months_pref[e[0]]+"-"+e[1]||t},s=(t,e)=>{let a=new Date(t[0],t[1]-1,t[2]);var i=a.getDate();a.setMonth(a.getMonth()+e),a.getDate()!=i&&a.setDate(0);let r="",o=a.getFullYear().toString().substr(-2),n=a.getMonth();return"gr"===LANG&&(r=LABELS[LANG].months[n].substr(0,3)+"-"+o),"en"===LANG&&(r=LABELS[LANG].months[n].substr(0,3)+"-"+o),r},d=e=>{let a=$("#icu-chart").empty().html("<canvas></canvas>"),i=a.find("canvas")[0],r={type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:["#c45850","#5987A5"],borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0},scales:{xAxes:[{stacked:!1,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{stacked:!1,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]},hover:{animationDuration:0},animation:{duration:1,onComplete:function(){var t=this.chart,e=t.ctx;e.font=Chart.helpers.fontString(Chart.defaults.global.defaultFontSize,Chart.defaults.global.defaultFontStyle,Chart.defaults.global.defaultFontFamily),e.fillStyle="white",e.textAlign="right",e.textBaseline="bottom",this.data.datasets.forEach(function(a,i){t.controller.getDatasetMeta(i).data.forEach(function(t,i){var r=a.data[i]+"%";e.fillText(r,t._model.x-10,t._model.y+7)})})}},plugins:{datalabels:{anchor:"end",align:"top",formatter:Math.round,font:{weight:"bold"}}}}};gData.transition.icu_percentages.values.forEach(function(t,e){for(let t=0;t<2;t++)r.data.labels.push(LABELS[LANG].transition.icu_percentages[t])}),gData.transition.icu_percentages.values[0].forEach(function(t,e){r.data.datasets[0].data.push(t)}),a.outerWidth()>=400&&(r.options.aspectRatio=2.1),a.outerWidth()>=600&&(r.options.aspectRatio=2.3);let o=i.getContext("2d");const n=t=>t[2]+" "+LABELS[LANG].months[parseInt(t[1])-1];let s=$("#icu_percentages").find("h5.updated");if(!s.hasClass("show")){let t=gData.transition.icu_percentages.from,e={gr:"Στις "+n(t),en:"As of "+n(t)};s.text(e[LANG]),s.addClass("show")}window.myChart=new Chart(o,r)},l=t=>{let e=$("#unemployment-chart").empty().html("<canvas></canvas>"),a=e.find("canvas")[0],i=$("#select-unemp-type").val();void 0!==i||(i=1);var r={type:"bar",data:{labels:[],datasets:[{type:"line",label:LABELS[LANG].prefectures.new_unemployed,data:[],borderColor:"#0CBF12",backgroundColor:"rgba(0, 0, 0, 0)",yAxisID:"newunemployed"},{label:LABELS[LANG].prefectures.total_unemployed,data:[],borderColor:"rgba(0, 0, 0, 0)",backgroundColor:"#C5042D",yAxisID:"totalunemployed"}]},options:{maintainAspectRatio:!1,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},animation:{duration:1e3},scales:{xAxes:[{gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)"}}],yAxes:[{id:"totalunemployed",position:"left",ticks:{fontColor:"rgba(255,255,255,0.7)",beginAtZero:!0},gridLines:{display:!0,color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},scaleLabel:{display:!0,labelString:LABELS[LANG].prefectures.total_unemployed}},{id:"newunemployed",position:"right",ticks:{display:!0,fontColor:"rgba(255,255,255,0.7)",beginAtZero:!0},gridLines:{display:!1,color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},scaleLabel:{display:!1,labelString:LABELS[LANG].prefectures.new_unemployed}}]}}};let o=[];for(var n=gData["regions-unemployment"][0].new_claims.from,d=gData["regions-unemployment"][0].new_claims.values.length,l=0;l<d;l++)r.data.labels.push(s(n,l));gData["regions-unemployment"].forEach(function(t,e){t.code==i&&o.push({name:gData["regions-unemployment"][e][LANG],new_claims:t.new_claims,total_unemployed:t.total_unemployed,code:e.toString()})}),o.forEach(function(t,e){r.data.datasets[0].data=t.new_claims.values,r.data.datasets[1].data=t.total_unemployed.values}),e.outerWidth()>=400&&(r.options.aspectRatio=1.1),e.outerWidth()>=600&&(r.options.aspectRatio=1.3);let c=a.getContext("2d");window.myChart=new Chart(c,r)},c=()=>{$("#greece-map").empty();Highcharts.mapChart("greece-map",{navigation:{buttonOptions:{enabled:!1}},legend:{enabled:!1},credits:{enabled:!1},chart:{map:"countries/gr/gr-all"},title:{text:""},subtitle:{text:""},mapNavigation:{enabled:!1},tooltip:{formatter:function(){var t,e=this.point.value,a="";return gData["prefectures-data"].forEach(function(i,r){i.gr!==e[1]&&i.en!==e[1]||(t=i.value,a+='<span style="color:'+COLORS.selected+'">'+i[LANG]+"</span><br>"+LABELS[LANG].transition.carriers+" : "+t)}),a}},series:[{stickyTracking:!0,data:[["gr-at",[1,"Attica"]],["gr-gc",[2,"Central Greece"]],["gr-mc",[3,"Central Macedonia"]],["gr-cr",[4,"Crete"]],["gr-mt",[5,"Eastern Macedonia and Thrace"]],["gr-ep",[6,"Epirus"]],["gr-ii",[7,"Ionian Islands"]],["gr-ma",[8,"Mount Athos"]],["gr-an",[9,"North Aegean"]],["gr-pp",[10,"Peloponnese"]],["gr-as",[11,"South Aegean"]],["gr-ts",[12,"Thessaly"]],["gr-gw",[13,"Western Greece"]],["gr-mw",[14,"Western Macedonia"]]].map(t=>{var e,a=["#33ddcc","#48C7A6","#3BA9B0","#5987A5","#6F6587"];return gData["prefectures-data"].forEach(function(i,r){i.gr!==t[1][1]&&i.en!==t[1][1]||((e=i.value100k)>0&&e<=200?t.push(a[0]):e>200&&e<=400?t.push(a[1]):e>400&&e<=600?t.push(a[2]):e>600&&e<=800?t.push(a[3]):e>800&&t.push(a[4]))}),t}),keys:["hc-key","value","color"],name:"",borderColor:"black",borderWidth:.1,states:{hover:{color:"#eecc22"}},dataLabels:{enabled:!1,format:"{point.name}"},point:{events:{mouseOver:function(t){g(t.target.value[0]),h(t.target.value[0])}}}}]})},p=()=>{gData["prefectures-details"].forEach(function(t,e){var a,i,r,o=gData["prefectures-details"][e][LANG],n=t.twoweektrendlatest,s=t.newcasesperweekpop,d=Math.floor(s),l=t.last14days_rolling.values,c=t.color,p=LABELS[LANG].prefectures[t.color],u="",g=Array.isArray(t.rj_value)?t.rj_value[1].slice(-1).pop():"",h=t.newcases>0?"+"+t.newcases:"",f=t.newvaccinations>0?"+"+t.newvaccinations:"";if(s<=12)var b="#fff!important;";else b="inherit;";Array.isArray(t.rj_value)&&(t.rj_value[0][1]<t.rj_value[1][1]?(r="increasing",u=LABELS[LANG].prefectures.increasing):t.rj_value[0][1]>t.rj_value[1][1]?(r="decreasing",u=LABELS[LANG].prefectures.decreasing):(r="flat",u=LABELS[LANG].prefectures.flat)),n>=0&&n<=5?(a="flat",i=LABELS[LANG].prefectures.flat):n>5?(a="increasing",i=LABELS[LANG].prefectures.increasing):(a="decreasing",i=LABELS[LANG].prefectures.decreasing),$("#tbodyid").append(`<tr>\n\t\t\t\t<td id="box_${e}" class="${c} personPopupTrigger" style="text-align:left!important" rel="${o},${p},${c}">${o}</td>\n\t\t\t\t<td class="${a} smallertext"><h4 class="m-0 font-weight-bold" style="color: inherit;">${t.twoweektrendlatest}%</h4><span class="${a}">${i}</span></td>\n\t\t\t\t<td><span id="sparkline${e}"></span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${t.totalcases}</h4><div style="font-size: 10px; margin-top: -2px; color: #ffc108">${h}</div></td>\n\t\t\t\t<td><div class="progress"><div role="progressbar" aria-valuenow="${s}" aria-valuemin="0" aria-valuemax="200" class="progress-bar ${c}" style="width: ${d}%;color: ${b}">${s}</div></div></td>\n\t\t\t\t<td class="${r} smallertext"><h4 class="m-0 font-weight-bold" style="color: inherit;">${g}</h4><span>${u}</span></td>\n\t\t\t\t<td><h4 class="m-0" style="color: #3DC;">${t.total_vaccinations}</h4><div style="font-size: 10px; margin-top: -2px; color: #8bc34a">${f}</div></td>\n\t\t\t\t<td><h4 class="m-0" style="color: inherit;">${t.population}</h4></td>\n\t\t\t</tr>`),$("#sparkline"+e).sparkline(l,{type:"line",width:100,height:50,lineColor:"#0083CD",fillColor:"rgba(0,131,205,0.2)",minSpotColor:!0,maxSpotColor:!0})}),$("#search-nomous").on("keyup",function(){var t=$(this).val().toLowerCase();$("#tbodyid tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)})}),$("#prefectures").tablesorter({theme:"blackice",widgets:["saveSort"],widgetOptions:{saveSort:!0},sortList:[[4,1]]}),$("#pref-updated").text(gData.updated.lastprefecture[LANG])},u=()=>{var t=null,e=function(){t&&clearTimeout(t),t=setTimeout(function(){a={left:"0px",top:"0px"},i.css("display","none")},500)},a={left:"0px",top:"0px"},i=$(`<div class="root" id="PopupContainer">\n\t\t\t   <div class="StateTooltip" style="width: 350px;">\n\t\t\t      <div style="margin-bottom: 9px; border-bottom: 1px solid rgb(238, 238, 238);">\n\t\t\t         <div class="Row">\n\t\t\t            <div class="Col" style="white-space: nowrap;">\n\t\t\t               <div style="font-weight: bold; padding: 0px 0px 5px;">\n\t\t\t                  <div class="ColorDot ColorDotFlashing colorclass" style=""></div>\n\t\t\t                  <span id="prefect_name"></span>\n\t\t\t               </div>\n\t\t\t            </div>\n\t            <div class="Col">\n\t               <div id="closetab" style="font-size: 10px; color: #aaa; text-align: right; line-height: 20px;">X</div>\n\t            </div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t      <div class="Row">\n\t\t\t        <div class="LabeledDataFrame">\n\t\t\t           <h3>${LABELS[LANG].prefectures.danger}</h3>\n\t\t\t           <div class="content">\n\t\t\t              <div class="color"><span id="dangerlevel"></span></div>\n\t\t\t           </div>\n\t\t\t        </div>\n\t\t\t      </div>\n\t\t\t      <div class="Row">\n\t\t\t         <div class="LabeledDataFrame" style="width:100%">\n\t\t\t          <h3>${LABELS[LANG].prefectures.latest_cases}</h3>\n\t\t\t            <div class="content">\n\t\t\t               <canvas style="width: 100% !important;height: auto !important;" id="myChart">\n\t\t\t            </div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t   </div>\n\t\t\t</div>`);const r=(t,e,a)=>{let i=new Date(t[0],t[1]-1,t[2]);i.setDate(i.getDate()+e);let r="",o=i.getFullYear(),n=i.getMonth()+1,s=i.getDate();if(a){r=1e4*parseInt(o)+100*parseInt(n)+parseInt(s)}else"gr"===LANG&&(r=n+"/"+s),"en"===LANG&&(r=n+"/"+s);return r};$(".personPopupTrigger").on("mouseover",function(){$(this).data("hoverIntentAttached")||($(this).data("hoverIntentAttached",!0),$(this).hoverIntent(function(){t&&clearTimeout(t);var e=$(this).attr("rel").split(","),o=e[0],n=e[1],s=e[2];if(""!=n){var d=$(this).offset(),l=$(this).width(),c={left:d.left+l+"px",top:d.top-5+"px"};if(a.left!=c.left||a.top!=c.top){i.css({left:c.left,top:c.top}),a=c,$("#prefect_name").html(o),$("#dangerlevel").html(n);var p={green:"#12ad2c",yellow:"#ffc300",orange:"#E5712A",red:"#c82d2d",redplus:"#800000",lightgrey:"#ccc",grey:"#605f69"};$(".color").removeAttr("style").css({color:p[s],"font-weight":"bold"}),$(".colorclass").removeAttr("style").css({"background-color":p[s]});var u,g,h=$("#myChart"),f=new Chart(h,{type:"bar",data:{labels:[],datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1}]},options:{responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{mode:"index",intersect:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]},animation:{duration:500,easing:"easeOutQuart",onComplete:function(){var t=this.chart.ctx;t.font=Chart.helpers.fontString("10","bold",Chart.defaults.global.defaultFontFamily),t.textAlign="center",t.textBaseline="bottom",this.data.datasets.forEach(function(e){for(var a=0;a<e.data.length;a++){var i=e._meta[Object.keys(e._meta)[0]].data[a]._model,r=e._meta[Object.keys(e._meta)[0]].data[a]._yScale.maxHeight;t.fillStyle="#444";var o=i.y-5;(r-i.y)/r>=.85&&(o=i.y+20),t.fillText(e.data[a],i.x,o)}})}}}});i.css("display","block"),u=f,g=o,gData["prefectures-details"].forEach(function(t,e){t[LANG]==g&&(u.legend.display=!1,u.data.datasets[0].data=gData["prefectures-details"][e].carriers.values,gData["prefectures-details"][e].carriers.values.forEach(function(t,a){u.data.labels.push(r(gData["prefectures-details"][e].carriers.from,a,!1))}),u.update())})}}},e),$(this).trigger("mouseover"))}),$("body").append(i),$("#PopupContainer").mouseover(function(){t&&clearTimeout(t)}),$("#PopupContainer").mouseout(e),$("#closetab").mouseover(closetab)},g=e=>{let a=$("#region-chart").empty().html("<canvas></canvas>"),i=a.find("canvas")[0],r=$("#select-pref-type").val(),n={type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]},options:{aspectRatio:.4,animation:{duration:1e3},responsive:!0,legend:{display:!1},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){return gData["prefectures-data"].forEach(function(e,a){e.gr!==t[0].yLabel&&e.en!==t[0].yLabel||$("#select-prefecture").val()!==e.code&&h(e.code)}),t[0].yLabel},label:function(t,e){return t.xLabel+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{position:"top",gridLines:{color:"rgba(255,255,255,0.2)"},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};a.outerWidth()>=400&&(n.options.aspectRatio=1.3),""!==e&&(n.options.animation.duration=0);let s=[];gData["prefectures-data"].forEach(function(t,e){s.push({name:gData["prefectures-data"][e][LANG],value:o(t[r].values,t.code),code:(e+1).toString()})}),s.sort((t,e)=>t.value<e.value?1:t.value>e.value?-1:0),s.forEach(function(t,a){n.data.labels.push(t.name),n.data.datasets[0].data.push(t.value),e==t.code?n.data.datasets[0].backgroundColor.push(COLORS.selected):n.data.datasets[0].backgroundColor.push((t=>{let e=$("#select-pref-type").val(),a="rgba(90, 90, 90, 0.6)",i=o(gData["prefectures-data"][parseInt(t.code)-1][e].values,t.code);return i>=1&&(a=COLORS.dark,0===gThresholds[e]&&(a=COLORS.default)),i>=gThresholds[e]&&gThresholds[e]>=1&&(a=COLORS.default),a})(t))});let d=i.getContext("2d");window.myChart=new Chart(d,n)},h=t=>{$("#select-prefecture").val(t),$(".transition.prefecture").each(function(){$(this).attr("pref",t),$(this).find("h3").find("span").text(gData["prefectures-data"][parseInt(t)-1][LANG]),i($(this),$(this).attr("code"),$(this).attr("pref"),!0),r($(this))})},f=()=>{let t,e,a,i,r=[];function o(t,a){$.each(r,function(t,i){var r=e.getRegion(i.prefname);if(void 0!==r&&void 0!==i.prefval[a.value]){r.setFill("#"+i.prefval[a.value][1]),r.setTooltip(i.prefname+"<br><sup>*</sup>"+LABELS[LANG].total+i.prefval[a.value][2]+"<br>"+LABELS[LANG].daily_cases+i.prefval[a.value][3]);var o=new Date(i.prefval[a.value][0]).toDateString().split(" ").slice(1).join(" ").split(" ");o[0]=LABELS[LANG].months_pref[o[0]],$("#date_txt").text(o.join(" "))}})}gData.transition.mapepi.forEach(function(e,o){var n=[];n.prefname=gData.transition.mapepi[o].en,n.prefval=gData.transition.mapepi[o].percentage.values,(a=new Date(gData.transition.mapepi[o].percentage.from).toDateString().split(" ").slice(1))[0]=LABELS[LANG].months_pref[a[0]],a=a.join(" "),(i=new Date(gData.transition.mapepi[o].percentage.to).toDateString().split(" ").slice(1))[0]=LABELS[LANG].months_pref[i[0]],i=i.join(" "),n.start=gData.transition.mapepi[o].percentage.from,r.push(n),t=n.prefval.length});$("#mapsvg").mapSvg({width:"100%",height:"100%",colors:{baseDefault:"#000000",background:"#242A3C",selected:0,hover:20,directory:"#fafafa",status:{}},viewBox:[0,-1.8823751724135036,6843.8384,6761.240350344827],tooltips:{mode:"id",on:!1,priority:"local",position:"bottom-right"},source:"lib/mapsvg/maps/not-calibrated\\greece.svg",title:"Not-calibrated\\greece",responsive:!0,afterLoad:function(){e=this,$(".map").show(),$("#slider").slider({range:!1,min:0,max:t-1,step:1,slide:function(t,e){o(0,e)},change:function(t,e){o(0,e)},create:function(e,a){$(this).slider("value",t-1)}});var a,r=!1,n=$("#pause");n.on("click",function(){0==(r=!r)?(clearInterval(a),n.html("Play")):a=setInterval(function(){var t=$("#slider").slider("value"),e=parseInt(t)+1;$("#slider").slider("value",e),$("#sliderval").val(e),n.html("Pause")},200)}),$("#date_txt").text(i)}})};$.getJSON("https://raw.githubusercontent.com/Sandbird/covid19-Greece/master/greece.json?version="+RANDOMSTRING,function(i){gData=i,(()=>{const t=t=>{let e=t.sort((t,e)=>t-e),a=[Math.floor(t.length/2),Math.ceil(t.length/2)];return(e[a[0]]+e[a[1]])/2};for(thType in gThresholds){let e=[];gData["prefectures-data"].forEach(function(t,a){"carriers"!==t[thType]&&"deaths"!==t[thType]&&"vaccinations"!==t[thType]||e.push(o(t[thType].values),t.code)}),gThresholds[thType]=t(e)}})(),e(),(()=>{$wrapper=$("#demography-chart-group-cases").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,gridLineDashStyle:"shortdash",title:{text:"Κρούσματα"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.4,borderWidth:0,pointWidth:5}},series:[]};var e={};gData.demography_group_cases.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_cases.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_cases.cases[a]})}),$("#demography-chart-group-cases").highcharts(t)})(),(()=>{$wrapper=$("#demography-chart-group-deaths").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,gridLineDashStyle:"shortdash",title:{text:"Θάνατοι"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.4,borderWidth:0,pointWidth:5}},series:[]};var e={};gData.demography_group_deaths.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_deaths.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_deaths.deaths[a]})}),$("#demography-chart-group-deaths").highcharts(t)})(),(()=>{$wrapper=$("#demography-chart-group-intensive").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let t={navigation:{buttonOptions:{enabled:!1}},credits:{enabled:!1},chart:{type:"column"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,gridLineDashStyle:"shortdash",title:{text:"Νοσηλείες"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.4,borderWidth:0,pointWidth:5}},series:[]};var e={};gData.demography_group_intensive.categories.forEach(function(t,a){e[a]=n(t)}),t.xAxis.categories=e,gData.demography_group_intensive.age_groups.forEach(function(e,a){e=(e=e.replace("Male",LABELS[LANG].male)).replace("Female",LABELS[LANG].female),t.series.push({name:e,data:gData.demography_group_intensive.intensive[a]})}),$("#demography-chart-group-intensive").highcharts(t)})(),l(),(()=>{$wrapper=$("#demography-chart").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){var a="";return 1==t.datasetIndex&&(a=" ("+(e.datasets[t.datasetIndex].data[t.index]/e.datasets[2].data[t.index]*100).toFixed(1)+"%)"),e.datasets[t.datasetIndex].label+": "+t.value+a+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_sum.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),(()=>{$wrapper=$("#demography-chart-men").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){var a="";return 1==t.datasetIndex&&(a=" ("+(e.datasets[t.datasetIndex].data[t.index]/e.datasets[2].data[t.index]*100).toFixed(1)+"%)"),e.datasets[t.datasetIndex].label+": "+t.value+a+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_men.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),(()=>{$wrapper=$("#demography-chart-women").empty().html("<canvas></canvas>"),$canvas=$wrapper.find("canvas")[0];let e={type:"horizontalBar",data:{labels:[],datasets:[{label:LABELS[LANG].demography.serious,backgroundColor:COLORS.serious,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.deaths,backgroundColor:COLORS.deaths,borderWidth:.5,borderColor:"#242a3c",data:[]},{label:LABELS[LANG].demography.cases,backgroundColor:COLORS.default,borderWidth:.5,borderColor:"#242a3c",data:[]}]},options:{aspectRatio:.9,responsive:!0,legend:{display:!0,labels:{fontColor:"rgba(255, 255, 255, 0.7)"}},title:{display:!1},tooltips:{xPadding:24,yPadding:12,displayColors:!0,callbacks:{title:function(t){let e=t[0].yLabel,a=0;return t.forEach(function(t,e){a+=t.xLabel}),e+": "+a+" "+{gr:"",en:"cases"}[LANG]},label:function(t,e){var a="";return 1==t.datasetIndex&&(a=" ("+(e.datasets[t.datasetIndex].data[t.index]/e.datasets[2].data[t.index]*100).toFixed(1)+"%)"),e.datasets[t.datasetIndex].label+": "+t.value+a+{gr:"",en:" cases"}[LANG]}}},scales:{xAxes:[{stacked:!0,position:"top",gridLines:{color:"rgba(255,255,255,0.2)",zeroLineColor:"rgba(255,255,255,0.2)",borderDash:[3,1]},ticks:{suggestedMin:0,fontColor:"rgba(255,255,255,0.7)",callback:function(e,a,i){return t(e)}}}],yAxes:[{stacked:!0,barPercentage:.5,gridLines:{color:"rgba(255,255,255,0.1)"},ticks:{fontColor:"rgba(255,255,255,0.7)"}}]}}};$wrapper.outerWidth()>=400&&(e.options.aspectRatio=2.1),$wrapper.outerWidth()>=600&&(e.options.aspectRatio=2.3),gData.demography_women.forEach(function(t,a){e.data.labels.push(LABELS[LANG].age[a]);for(let a=0;a<3;a++)e.data.datasets[a].data.push(t[a])});let a=$canvas.getContext("2d");window.myChart=new Chart(a,e)})(),d(),c(),g(""),h("1"),p(),$(".updated-last").text(gData.updated.last[LANG]),$(".updated-demography-cases").text(gData.updated.demography[LANG]),$(".updated-demography-deaths").text(gData.updated.demography[LANG]),$(".updated-demography-serious").text(gData.updated.demography[LANG]),$(".updated-demography-sum").text(gData.updated.demography[LANG]),$(".updated-demography-men").text(gData.updated.demography[LANG]),$(".updated-demography-women").text(gData.updated.demography[LANG]),$(".updated-unemployment").text(gData.updated.demography[LANG]),a();var r=$("#predicted_scroller").scrollLeft(),s=(new Date).getWeek();$("#predicted_scroller").animate({scrollLeft:r-4*s},800),$("#cover-block").fadeOut(),u(),f()}),$(".transition").find(".switch").on("click",function(){let t=$(this).closest(".transition");$(this).siblings(".switch").removeClass("selected"),$(this).addClass("selected"),i(t,t.attr("code"),t.attr("pref"),!0)}),$("#select-prefecture").on("change",function(){let t=$(this).val();h(t)}),$("#select-pref-type").on("change",function(){g("")}),$("#select-unemp-type").on("change",function(){l()}),$(".more").on("click",function(){$(this).closest("p.notes").addClass("show")}),$(".checkboxes").find(".checkbox").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on");let t=$(this).closest(".transition");i(t,t.attr("code"),t.attr("pref"),!1)}),$('a[href^="#"]').click(function(){let t=$(this).attr("href"),e=$(t).offset().top;return $("body,html").animate({scrollTop:e},400,"swing"),!1})};function isInt(t){return/^-?[0-9]+$/.test(t)}Date.prototype.getWeek=function(){var t=new Date(this.getFullYear(),0,1),e=(new Date(this.getFullYear(),this.getMonth(),this.getDate())-t+1)/864e5;return Math.ceil(e/7)},$(function(){init()});